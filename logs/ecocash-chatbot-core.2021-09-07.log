.20:28:17.370 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default' 
.20:28:17.381 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated... 
.20:28:17.388 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed. 
.20:28:26.977 INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 6.2.0.Final 
.20:28:26.994 INFO  z.c.c.e.EcocashChatbotCoreApplication - Starting EcocashChatbotCoreApplication using Java 1.8.0_271 on LAPTOP-1JQH6S1S with PID 2356 (C:\Users\Kudzai Macheyo\IdeaProjects\ecocash-chatbot-core\target\classes started by Kudzai Macheyo in C:\Users\Kudzai Macheyo\IdeaProjects\ecocash-chatbot-core) 
.20:28:26.995 INFO  z.c.c.e.EcocashChatbotCoreApplication - The following profiles are active: dev 
.20:28:28.686 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode! 
.20:28:28.688 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFERRED mode. 
.20:28:28.829 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 134 ms. Found 8 JPA repository interfaces. 
.20:28:29.195 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@3104351d' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying) 
.20:28:29.216 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying) 
.20:28:30.524 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http) 
.20:28:30.531 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"] 
.20:28:30.531 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat] 
.20:28:30.532 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.50] 
.20:28:30.637 INFO  o.a.c.c.C.[.[.[/ecocashbotcore] - Initializing Spring embedded WebApplicationContext 
.20:28:30.637 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3592 ms 
.20:28:30.810 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default] 
.20:28:30.869 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.32.Final 
.20:28:30.877 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning 
.20:28:31.006 INFO  o.s.s.l.DefaultSpringSecurityContextSource -  URL 'ldap://192.168.101.47:389', root DN is '' 
.20:28:31.006 INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final} 
.20:28:31.291 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting... 
.20:28:32.122 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed. 
.20:28:32.159 INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.MySQL55Dialect 
.20:28:32.223 INFO  o.h.e.b.internal.EnversServiceImpl - Envers integration enabled? : true 
.20:28:33.662 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure Ant [pattern='/dialogflow/**'] with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2c748a15, org.springframework.security.web.context.SecurityContextPersistenceFilter@71179b6f, org.springframework.security.web.header.HeaderWriterFilter@8aeab9e, org.springframework.security.web.authentication.logout.LogoutFilter@1039bfc4, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@545b5ed0, zw.co.cassavasmartech.ecocashchatbotcore.security.CustomFilter@19fd43da, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@526e8108, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4ac8768e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@115dcaea, org.springframework.security.web.session.SessionManagementFilter@60743cdb, org.springframework.security.web.access.ExceptionTranslationFilter@16a5c7e4, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@3b009e7b] 
.20:28:33.690 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7fda2001, org.springframework.security.web.context.SecurityContextPersistenceFilter@68ab6ab0, org.springframework.security.web.header.HeaderWriterFilter@79980d8d, org.springframework.security.web.authentication.logout.LogoutFilter@6eb089e6, zw.co.cassavasmartech.ecocashchatbotcore.security.JWTFilter@162c1dfb, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@61ffd148, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@58324c9f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@21ae657b, org.springframework.security.web.session.SessionManagementFilter@35d60381, org.springframework.security.web.access.ExceptionTranslationFilter@2785db06, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@7e64c1a9] 
.20:28:34.422 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"] 
.20:28:34.452 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path '/ecocashbotcore' 
.20:28:34.452 INFO  o.s.d.r.c.DeferredRepositoryInitializationListener - Triggering deferred initialization of Spring Data repositoriesâ€¦ 
.20:28:35.865 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform] 
.20:28:35.874 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default' 
.20:28:36.355 INFO  o.s.d.r.c.DeferredRepositoryInitializationListener - Spring Data repositories initialized! 
.20:28:36.360 INFO  z.c.c.e.EcocashChatbotCoreApplication - Started EcocashChatbotCoreApplication in 9.759 seconds (JVM running for 10.284) 
.20:29:40.179 INFO  o.a.c.c.C.[.[.[/ecocashbotcore] - Initializing Spring DispatcherServlet 'dispatcherServlet' 
.20:29:40.179 INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet' 
.20:29:40.187 INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 8 ms 
.20:29:40.385 INFO  o.s.s.l.SpringSecurityLdapTemplate - Ignoring PartialResultException 
.20:29:40.945 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow transaction request {
  "responseId": "3def1b06-5972-4394-bc19-62e99c7cf864-b4cb2fcf",
  "queryResult": {
    "queryText": "Reset my password",
    "parameters": {},
    "allRequiredParamsPresent": true,
    "outputContexts": [
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/awaiting_pinreset_enrollment_confirmation",
        "lifespanCount": 1
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/__system_counters__",
        "lifespanCount": 0,
        "parameters": {
          "no-input": 0.0,
          "no-match": 0.0
        }
      }
    ],
    "intent": {
      "name": "projects/the-attendant-hgawnh/agent/intents/cbd27331-6c49-4632-8f75-a3398cb8b7d2",
      "displayName": "usecase.pinreset"
    },
    "intentDetectionConfidence": 0.72842085,
    "languageCode": "en",
    "sentimentAnalysisResult": {
      "queryTextSentiment": {
        "score": -0.5,
        "magnitude": 0.5
      }
    }
  },
  "originalDetectIntentRequest": {
    "payload": {
      "SmsSid": "SMa3e822c6245d4d822e57907269594d62",
      "SmsStatus": "received",
      "MessageSid": "SMa3e822c6245d4d822e57907269594d62",
      "WaId": "263783324671",
      "ProfileName": "justicemacheyo",
      "ApiVersion": "2010-04-01",
      "NumMedia": "0",
      "NumSegments": "1",
      "From": "whatsapp:+263783324671",
      "AccountSid": "ACeb9bc0506560f0c01a5358d1f3a45dec",
      "Body": "Reset my password",
      "To": "whatsapp:+14155238886",
      "SmsMessageSid": "SMa3e822c6245d4d822e57907269594d62"
    }
  },
  "session": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671"
}
 
.20:29:40.967 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow intent: usecase.pinreset 
.20:29:41.644 INFO  z.c.c.e.d.DialogFlowServiceImpl - Sending response to dialogFlow: {
  "fulfillmentText": "Great!! I can see you are enrolled on our self service platformðŸ˜ƒmay I go on to ask your security questions to verify your identity?",
  "source": "ecocashchatbotcore",
  "outputContexts": [
    {
      "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/ticket",
      "lifespanCount": 50,
      "parameters": {
        "id": 36,
        "question": 0
      }
    }
  ]
}
 
.20:30:11.538 INFO  o.s.s.l.SpringSecurityLdapTemplate - Ignoring PartialResultException 
.20:30:11.711 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow transaction request {
  "responseId": "ec674a3e-5774-4ac0-9f6c-b9b63aef41dc-b4cb2fcf",
  "queryResult": {
    "queryText": "Yes",
    "parameters": {},
    "allRequiredParamsPresent": true,
    "outputContexts": [
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/awaiting_answers",
        "lifespanCount": 1
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/ticket",
        "lifespanCount": 49,
        "parameters": {
          "id": 36.0,
          "msisdn": "",
          "question": 0.0
        }
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/awaiting_pinreset_enrollment_confirmation",
        "lifespanCount": 0
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/__system_counters__",
        "lifespanCount": 0,
        "parameters": {
          "no-input": 0.0,
          "no-match": 0.0
        }
      }
    ],
    "intent": {
      "name": "projects/the-attendant-hgawnh/agent/intents/799768aa-ff3f-4b08-9975-b5a572df8b66",
      "displayName": "usecase.pinreset.security.questions.affirmative"
    },
    "intentDetectionConfidence": 1.0,
    "languageCode": "en",
    "sentimentAnalysisResult": {
      "queryTextSentiment": {
        "score": 0.5,
        "magnitude": 0.5
      }
    }
  },
  "originalDetectIntentRequest": {
    "payload": {
      "SmsSid": "SM6448e78d856292f7add9272d318bd2b4",
      "ProfileName": "justicemacheyo",
      "From": "whatsapp:+263783324671",
      "To": "whatsapp:+14155238886",
      "NumSegments": "1",
      "SmsStatus": "received",
      "ApiVersion": "2010-04-01",
      "NumMedia": "0",
      "AccountSid": "ACeb9bc0506560f0c01a5358d1f3a45dec",
      "WaId": "263783324671",
      "MessageSid": "SM6448e78d856292f7add9272d318bd2b4",
      "Body": "Yes",
      "SmsMessageSid": "SM6448e78d856292f7add9272d318bd2b4"
    }
  },
  "session": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671"
}
 
.20:30:11.718 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow intent: usecase.pinreset.security.questions.affirmative 
.20:30:11.847 ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [/ecocashbotcore] threw exception [Request processing failed; nested exception is java.lang.NumberFormatException: For input string: "0.0"] with root cause 
java.lang.NumberFormatException: For input string: "0.0"
	at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
	at java.lang.Integer.parseInt(Integer.java:580)
	at java.lang.Integer.parseInt(Integer.java:615)
	at zw.co.cassavasmartech.ecocashchatbotcore.dialogflow.DialogFlowServiceImpl.pinresetUsecaseSecurityQuestionsAffirmativeHandler(DialogFlowServiceImpl.java:1026)
	at zw.co.cassavasmartech.ecocashchatbotcore.dialogflow.DialogFlowServiceImpl.processWebhookCall(DialogFlowServiceImpl.java:70)
	at zw.co.cassavasmartech.ecocashchatbotcore.controller.DialogFlowController.inbound(DialogFlowController.java:23)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1064)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:228)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at zw.co.cassavasmartech.ecocashchatbotcore.security.CustomFilter.doFilter(CustomFilter.java:15)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1723)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
.20:32:20.215 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default' 
.20:32:20.216 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated... 
.20:32:20.226 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed. 
.20:32:25.068 INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 6.2.0.Final 
.20:32:25.076 INFO  z.c.c.e.EcocashChatbotCoreApplication - Starting EcocashChatbotCoreApplication using Java 1.8.0_271 on LAPTOP-1JQH6S1S with PID 24664 (C:\Users\Kudzai Macheyo\IdeaProjects\ecocash-chatbot-core\target\classes started by Kudzai Macheyo in C:\Users\Kudzai Macheyo\IdeaProjects\ecocash-chatbot-core) 
.20:32:25.076 INFO  z.c.c.e.EcocashChatbotCoreApplication - The following profiles are active: dev 
.20:32:25.927 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode! 
.20:32:25.927 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFERRED mode. 
.20:32:26.055 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 125 ms. Found 8 JPA repository interfaces. 
.20:32:26.395 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@3104351d' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying) 
.20:32:26.404 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying) 
.20:32:26.902 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http) 
.20:32:26.907 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"] 
.20:32:26.910 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat] 
.20:32:26.910 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.50] 
.20:32:27.009 INFO  o.a.c.c.C.[.[.[/ecocashbotcore] - Initializing Spring embedded WebApplicationContext 
.20:32:27.009 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1886 ms 
.20:32:27.176 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default] 
.20:32:27.235 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.32.Final 
.20:32:27.239 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning 
.20:32:27.362 INFO  o.s.s.l.DefaultSpringSecurityContextSource -  URL 'ldap://192.168.101.47:389', root DN is '' 
.20:32:27.377 INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final} 
.20:32:27.491 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting... 
.20:32:27.682 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed. 
.20:32:27.713 INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.MySQL55Dialect 
.20:32:27.769 INFO  o.h.e.b.internal.EnversServiceImpl - Envers integration enabled? : true 
.20:32:28.880 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure Ant [pattern='/dialogflow/**'] with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@46fb0c33, org.springframework.security.web.context.SecurityContextPersistenceFilter@3c952a33, org.springframework.security.web.header.HeaderWriterFilter@56b8aaf1, org.springframework.security.web.authentication.logout.LogoutFilter@1e957e2f, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@738d37fc, zw.co.cassavasmartech.ecocashchatbotcore.security.CustomFilter@3b009e7b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1150d471, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1e225820, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@270a620, org.springframework.security.web.session.SessionManagementFilter@7412a438, org.springframework.security.web.access.ExceptionTranslationFilter@373e6b9d, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@684e8c9d] 
.20:32:28.903 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@58324c9f, org.springframework.security.web.context.SecurityContextPersistenceFilter@5a7df831, org.springframework.security.web.header.HeaderWriterFilter@4fc165f6, org.springframework.security.web.authentication.logout.LogoutFilter@19fd43da, zw.co.cassavasmartech.ecocashchatbotcore.security.JWTFilter@5d7d8613, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@667dcaad, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@22d7fd41, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6eb089e6, org.springframework.security.web.session.SessionManagementFilter@545b5ed0, org.springframework.security.web.access.ExceptionTranslationFilter@996a546, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@61ffd148] 
.20:32:30.467 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"] 
.20:32:30.589 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path '/ecocashbotcore' 
.20:32:30.597 INFO  o.s.d.r.c.DeferredRepositoryInitializationListener - Triggering deferred initialization of Spring Data repositoriesâ€¦ 
.20:32:32.259 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform] 
.20:32:32.261 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default' 
.20:32:33.606 INFO  o.s.d.r.c.DeferredRepositoryInitializationListener - Spring Data repositories initialized! 
.20:32:33.613 INFO  z.c.c.e.EcocashChatbotCoreApplication - Started EcocashChatbotCoreApplication in 8.893 seconds (JVM running for 9.376) 
.20:35:22.682 INFO  o.a.c.c.C.[.[.[/ecocashbotcore] - Initializing Spring DispatcherServlet 'dispatcherServlet' 
.20:35:22.682 INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet' 
.20:35:22.691 INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 9 ms 
.20:35:23.073 INFO  o.s.s.l.SpringSecurityLdapTemplate - Ignoring PartialResultException 
.20:35:23.667 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow transaction request {
  "responseId": "3d1f1673-aa74-4107-b21f-01ba8d11bb04-b4cb2fcf",
  "queryResult": {
    "queryText": "I said reset my password!",
    "parameters": {},
    "allRequiredParamsPresent": true,
    "outputContexts": [
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/awaiting_pinreset_enrollment_confirmation",
        "lifespanCount": 1
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/ticket",
        "lifespanCount": 47,
        "parameters": {
          "id": 36.0,
          "msisdn": "",
          "question": 0.0,
          "any": [
            "Reset my password"
          ],
          "any.original": [
            "Reset my password"
          ]
        }
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/__system_counters__",
        "lifespanCount": 0,
        "parameters": {
          "no-input": 0.0,
          "no-match": 0.0
        }
      }
    ],
    "intent": {
      "name": "projects/the-attendant-hgawnh/agent/intents/cbd27331-6c49-4632-8f75-a3398cb8b7d2",
      "displayName": "usecase.pinreset"
    },
    "intentDetectionConfidence": 0.7301115,
    "languageCode": "en",
    "sentimentAnalysisResult": {
      "queryTextSentiment": {
        "score": -0.7,
        "magnitude": 0.7
      }
    }
  },
  "originalDetectIntentRequest": {
    "payload": {
      "AccountSid": "ACeb9bc0506560f0c01a5358d1f3a45dec",
      "SmsMessageSid": "SM6e71ba201c93e6f89e6c45c32e4d7c9a",
      "NumSegments": "1",
      "Body": "I said reset my password!",
      "From": "whatsapp:+263783324671",
      "SmsSid": "SM6e71ba201c93e6f89e6c45c32e4d7c9a",
      "WaId": "263783324671",
      "ProfileName": "justicemacheyo",
      "MessageSid": "SM6e71ba201c93e6f89e6c45c32e4d7c9a",
      "SmsStatus": "received",
      "NumMedia": "0",
      "To": "whatsapp:+14155238886",
      "ApiVersion": "2010-04-01"
    }
  },
  "session": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671"
}
 
.20:35:23.695 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow intent: usecase.pinreset 
.20:35:25.981 INFO  z.c.c.e.d.DialogFlowServiceImpl - Sending response to dialogFlow: {
  "fulfillmentText": "Great!! I can see you are enrolled on our self service platformðŸ˜ƒmay I go on to ask your security questions to verify your identity?",
  "source": "ecocashchatbotcore",
  "outputContexts": [
    {
      "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/ticket",
      "lifespanCount": 50,
      "parameters": {
        "id": 37,
        "question": 0
      }
    }
  ]
}
 
.20:35:38.857 INFO  o.s.s.l.SpringSecurityLdapTemplate - Ignoring PartialResultException 
.20:35:39.024 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow transaction request {
  "responseId": "5ac8fc67-807b-4c22-9c96-0ab2aaef93db-b4cb2fcf",
  "queryResult": {
    "queryText": "Yes go ahead",
    "parameters": {},
    "allRequiredParamsPresent": true,
    "outputContexts": [
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/awaiting_answers",
        "lifespanCount": 1
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/ticket",
        "lifespanCount": 49,
        "parameters": {
          "id": 37.0,
          "msisdn": "",
          "question": 0.0,
          "any": [
            "Reset my password"
          ],
          "any.original": [
            "Reset my password"
          ]
        }
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/awaiting_pinreset_enrollment_confirmation",
        "lifespanCount": 0
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/__system_counters__",
        "lifespanCount": 0,
        "parameters": {
          "no-input": 0.0,
          "no-match": 0.0
        }
      }
    ],
    "intent": {
      "name": "projects/the-attendant-hgawnh/agent/intents/799768aa-ff3f-4b08-9975-b5a572df8b66",
      "displayName": "usecase.pinreset.security.questions.affirmative"
    },
    "intentDetectionConfidence": 1.0,
    "languageCode": "en",
    "sentimentAnalysisResult": {
      "queryTextSentiment": {
        "score": 0.6,
        "magnitude": 0.6
      }
    }
  },
  "originalDetectIntentRequest": {
    "payload": {
      "SmsStatus": "received",
      "SmsMessageSid": "SM61f4fef66334d9c48a2cb715941832e8",
      "ApiVersion": "2010-04-01",
      "AccountSid": "ACeb9bc0506560f0c01a5358d1f3a45dec",
      "NumSegments": "1",
      "To": "whatsapp:+14155238886",
      "Body": "Yes go ahead",
      "SmsSid": "SM61f4fef66334d9c48a2cb715941832e8",
      "ProfileName": "justicemacheyo",
      "WaId": "263783324671",
      "NumMedia": "0",
      "From": "whatsapp:+263783324671",
      "MessageSid": "SM61f4fef66334d9c48a2cb715941832e8"
    }
  },
  "session": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671"
}
 
.20:35:39.034 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow intent: usecase.pinreset.security.questions.affirmative 
.20:35:39.648 ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [/ecocashbotcore] threw exception [Request processing failed; nested exception is java.lang.NumberFormatException: For input string: "0.0"] with root cause 
java.lang.NumberFormatException: For input string: "0.0"
	at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
	at java.lang.Integer.parseInt(Integer.java:580)
	at java.lang.Integer.valueOf(Integer.java:766)
	at zw.co.cassavasmartech.ecocashchatbotcore.dialogflow.DialogFlowServiceImpl.pinresetUsecaseSecurityQuestionsAffirmativeHandler(DialogFlowServiceImpl.java:1026)
	at zw.co.cassavasmartech.ecocashchatbotcore.dialogflow.DialogFlowServiceImpl.processWebhookCall(DialogFlowServiceImpl.java:70)
	at zw.co.cassavasmartech.ecocashchatbotcore.controller.DialogFlowController.inbound(DialogFlowController.java:23)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1064)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:228)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at zw.co.cassavasmartech.ecocashchatbotcore.security.CustomFilter.doFilter(CustomFilter.java:15)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1723)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
.20:37:21.600 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default' 
.20:37:21.606 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated... 
.20:37:21.621 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed. 
.20:37:31.606 INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 6.2.0.Final 
.20:37:31.619 INFO  z.c.c.e.EcocashChatbotCoreApplication - Starting EcocashChatbotCoreApplication using Java 1.8.0_271 on LAPTOP-1JQH6S1S with PID 22864 (C:\Users\Kudzai Macheyo\IdeaProjects\ecocash-chatbot-core\target\classes started by Kudzai Macheyo in C:\Users\Kudzai Macheyo\IdeaProjects\ecocash-chatbot-core) 
.20:37:31.619 INFO  z.c.c.e.EcocashChatbotCoreApplication - The following profiles are active: dev 
.20:37:33.790 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode! 
.20:37:33.795 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFERRED mode. 
.20:37:34.135 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 327 ms. Found 8 JPA repository interfaces. 
.20:37:35.078 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@3104351d' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying) 
.20:37:35.096 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying) 
.20:37:36.412 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http) 
.20:37:36.431 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"] 
.20:37:36.433 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat] 
.20:37:36.433 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.50] 
.20:37:36.751 INFO  o.a.c.c.C.[.[.[/ecocashbotcore] - Initializing Spring embedded WebApplicationContext 
.20:37:36.751 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 5025 ms 
.20:37:37.206 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default] 
.20:37:37.345 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.32.Final 
.20:37:37.364 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning 
.20:37:37.648 INFO  o.s.s.l.DefaultSpringSecurityContextSource -  URL 'ldap://192.168.101.47:389', root DN is '' 
.20:37:37.669 INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final} 
.20:37:37.972 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting... 
.20:37:38.336 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed. 
.20:37:38.415 INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.MySQL55Dialect 
.20:37:38.577 INFO  o.h.e.b.internal.EnversServiceImpl - Envers integration enabled? : true 
.20:37:40.650 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure Ant [pattern='/dialogflow/**'] with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@67fa5045, org.springframework.security.web.context.SecurityContextPersistenceFilter@16a5c7e4, org.springframework.security.web.header.HeaderWriterFilter@1946384, org.springframework.security.web.authentication.logout.LogoutFilter@5cff6b74, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@270a620, zw.co.cassavasmartech.ecocashchatbotcore.security.CustomFilter@6f347d7, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@8aeab9e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5f366587, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5974b233, org.springframework.security.web.session.SessionManagementFilter@654e6a90, org.springframework.security.web.access.ExceptionTranslationFilter@721d8ab5, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@7fedb795] 
.20:37:40.659 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@602f8f94, org.springframework.security.web.context.SecurityContextPersistenceFilter@cfd1075, org.springframework.security.web.header.HeaderWriterFilter@19fd43da, org.springframework.security.web.authentication.logout.LogoutFilter@6cae2e4d, zw.co.cassavasmartech.ecocashchatbotcore.security.JWTFilter@42507640, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@45117dd, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7741771e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4dfe8b37, org.springframework.security.web.session.SessionManagementFilter@115dcaea, org.springframework.security.web.access.ExceptionTranslationFilter@2c748a15, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@abad89c] 
.20:37:41.562 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"] 
.20:37:41.598 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path '/ecocashbotcore' 
.20:37:41.600 INFO  o.s.d.r.c.DeferredRepositoryInitializationListener - Triggering deferred initialization of Spring Data repositoriesâ€¦ 
.20:37:43.239 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform] 
.20:37:43.262 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default' 
.20:37:44.675 INFO  o.s.d.r.c.DeferredRepositoryInitializationListener - Spring Data repositories initialized! 
.20:37:44.699 INFO  z.c.c.e.EcocashChatbotCoreApplication - Started EcocashChatbotCoreApplication in 14.016 seconds (JVM running for 15.413) 
.20:37:59.033 INFO  o.a.c.c.C.[.[.[/ecocashbotcore] - Initializing Spring DispatcherServlet 'dispatcherServlet' 
.20:37:59.033 INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet' 
.20:37:59.037 INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms 
.20:37:59.232 INFO  o.s.s.l.SpringSecurityLdapTemplate - Ignoring PartialResultException 
.20:37:59.852 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow transaction request {
  "responseId": "7a594763-e16f-408a-ab3a-d9ba874a7622-b4cb2fcf",
  "queryResult": {
    "queryText": "Reset my password",
    "parameters": {
      "any": [
        "Reset my password"
      ]
    },
    "allRequiredParamsPresent": true,
    "outputContexts": [
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/ticket",
        "lifespanCount": 48,
        "parameters": {
          "id": 37.0,
          "msisdn": "",
          "question": 0.0,
          "any": [
            "Reset my password"
          ],
          "any.original": [
            "Reset my password"
          ]
        }
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/awaiting_answers",
        "lifespanCount": 0,
        "parameters": {
          "any": [
            "Reset my password"
          ],
          "any.original": [
            "Reset my password"
          ]
        }
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/__system_counters__",
        "lifespanCount": 0,
        "parameters": {
          "no-input": 0.0,
          "no-match": 0.0,
          "any": [
            "Reset my password"
          ],
          "any.original": [
            "Reset my password"
          ]
        }
      }
    ],
    "intent": {
      "name": "projects/the-attendant-hgawnh/agent/intents/e3b607ca-bdcf-480e-9a59-ceb3098f0c67",
      "displayName": "usecase.pinreset.security.questions.first.answer"
    },
    "intentDetectionConfidence": 1.0,
    "languageCode": "en",
    "sentimentAnalysisResult": {
      "queryTextSentiment": {
        "score": -0.5,
        "magnitude": 0.5
      }
    }
  },
  "originalDetectIntentRequest": {
    "payload": {
      "SmsStatus": "received",
      "ProfileName": "justicemacheyo",
      "NumMedia": "0",
      "Body": "Reset my password",
      "NumSegments": "1",
      "WaId": "263783324671",
      "AccountSid": "ACeb9bc0506560f0c01a5358d1f3a45dec",
      "MessageSid": "SMa84113295e8ec03243cbeb4ac8ace16d",
      "SmsMessageSid": "SMa84113295e8ec03243cbeb4ac8ace16d",
      "From": "whatsapp:+263783324671",
      "ApiVersion": "2010-04-01",
      "SmsSid": "SMa84113295e8ec03243cbeb4ac8ace16d",
      "To": "whatsapp:+14155238886"
    }
  },
  "session": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671"
}
 
.20:37:59.876 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow intent: usecase.pinreset.security.questions.first.answer 
.20:38:00.336 ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [/ecocashbotcore] threw exception [Request processing failed; nested exception is java.lang.ArrayIndexOutOfBoundsException: 1] with root cause 
java.lang.ArrayIndexOutOfBoundsException: 1
	at zw.co.cassavasmartech.ecocashchatbotcore.dialogflow.DialogFlowServiceImpl.pinresetUsecaseSecurityQuestionsFirstAnswerHandler(DialogFlowServiceImpl.java:993)
	at zw.co.cassavasmartech.ecocashchatbotcore.dialogflow.DialogFlowServiceImpl.processWebhookCall(DialogFlowServiceImpl.java:72)
	at zw.co.cassavasmartech.ecocashchatbotcore.controller.DialogFlowController.inbound(DialogFlowController.java:23)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1064)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:228)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at zw.co.cassavasmartech.ecocashchatbotcore.security.CustomFilter.doFilter(CustomFilter.java:15)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1723)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
.20:38:14.677 INFO  o.s.s.l.SpringSecurityLdapTemplate - Ignoring PartialResultException 
.20:38:14.855 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow transaction request {
  "responseId": "fa786c7c-a81f-4802-8d98-67326a8e9019-b4cb2fcf",
  "queryResult": {
    "queryText": "Hi",
    "action": "input.welcome",
    "parameters": {},
    "allRequiredParamsPresent": true,
    "outputContexts": [
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/ticket",
        "lifespanCount": 47,
        "parameters": {
          "id": 37.0,
          "msisdn": "",
          "question": 0.0,
          "any": [
            "Reset my password"
          ],
          "any.original": [
            "Reset my password"
          ]
        }
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/__system_counters__",
        "lifespanCount": 0,
        "parameters": {
          "no-input": 0.0,
          "no-match": 0.0
        }
      }
    ],
    "intent": {
      "name": "projects/the-attendant-hgawnh/agent/intents/814ad089-d8e8-4b34-af51-753a7d3b27d3",
      "displayName": "Default Welcome Intent"
    },
    "intentDetectionConfidence": 1.0,
    "languageCode": "en",
    "sentimentAnalysisResult": {
      "queryTextSentiment": {
        "score": 0.2,
        "magnitude": 0.2
      }
    }
  },
  "originalDetectIntentRequest": {
    "payload": {
      "NumSegments": "1",
      "SmsStatus": "received",
      "SmsMessageSid": "SMf2f03a7d3f818601df55e64d8c046f4f",
      "AccountSid": "ACeb9bc0506560f0c01a5358d1f3a45dec",
      "ApiVersion": "2010-04-01",
      "ProfileName": "justicemacheyo",
      "Body": "Hi",
      "WaId": "263783324671",
      "NumMedia": "0",
      "SmsSid": "SMf2f03a7d3f818601df55e64d8c046f4f",
      "To": "whatsapp:+14155238886",
      "MessageSid": "SMf2f03a7d3f818601df55e64d8c046f4f",
      "From": "whatsapp:+263783324671"
    }
  },
  "session": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671"
}
 
.20:38:14.860 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow intent: Default Welcome Intent 
.20:38:14.937 INFO  z.c.c.e.d.DialogFlowServiceImpl - Sending response to dialogFlow: {
  "fulfillmentText": "Welcome back DaglðŸ˜ƒðŸ‘‹ hope you are having a beautiful evening so far. What can I do for you today?",
  "source": "ecocashchatbotcore"
}
 
.20:38:24.432 INFO  o.s.s.l.SpringSecurityLdapTemplate - Ignoring PartialResultException 
.20:38:24.605 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow transaction request {
  "responseId": "446eee22-0fcf-4994-9b1a-b88fbaa78ed0-b4cb2fcf",
  "queryResult": {
    "queryText": "Reset my password please",
    "parameters": {},
    "allRequiredParamsPresent": true,
    "outputContexts": [
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/awaiting_pinreset_enrollment_confirmation",
        "lifespanCount": 1
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/ticket",
        "lifespanCount": 46,
        "parameters": {
          "id": 37.0,
          "msisdn": "",
          "question": 0.0,
          "any": [
            "Reset my password"
          ],
          "any.original": [
            "Reset my password"
          ]
        }
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/__system_counters__",
        "lifespanCount": 0,
        "parameters": {
          "no-input": 0.0,
          "no-match": 0.0
        }
      }
    ],
    "intent": {
      "name": "projects/the-attendant-hgawnh/agent/intents/cbd27331-6c49-4632-8f75-a3398cb8b7d2",
      "displayName": "usecase.pinreset"
    },
    "intentDetectionConfidence": 0.72161186,
    "languageCode": "en",
    "sentimentAnalysisResult": {
      "queryTextSentiment": {
        "score": -0.4,
        "magnitude": 0.4
      }
    }
  },
  "originalDetectIntentRequest": {
    "payload": {
      "SmsSid": "SM20e247381ef0bd078c4bde0455248cbc",
      "From": "whatsapp:+263783324671",
      "Body": "Reset my password please",
      "To": "whatsapp:+14155238886",
      "AccountSid": "ACeb9bc0506560f0c01a5358d1f3a45dec",
      "WaId": "263783324671",
      "ProfileName": "justicemacheyo",
      "MessageSid": "SM20e247381ef0bd078c4bde0455248cbc",
      "SmsMessageSid": "SM20e247381ef0bd078c4bde0455248cbc",
      "SmsStatus": "received",
      "ApiVersion": "2010-04-01",
      "NumMedia": "0",
      "NumSegments": "1"
    }
  },
  "session": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671"
}
 
.20:38:24.610 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow intent: usecase.pinreset 
.20:38:24.919 INFO  z.c.c.e.d.DialogFlowServiceImpl - Sending response to dialogFlow: {
  "fulfillmentText": "Great!! I can see you are enrolled on our self service platformðŸ˜ƒmay I go on to ask your security questions to verify your identity?",
  "source": "ecocashchatbotcore",
  "outputContexts": [
    {
      "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/ticket",
      "lifespanCount": 50,
      "parameters": {
        "id": 38,
        "question": 0
      }
    }
  ]
}
 
.20:38:35.392 INFO  o.s.s.l.SpringSecurityLdapTemplate - Ignoring PartialResultException 
.20:38:35.564 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow transaction request {
  "responseId": "b861227d-0676-4d00-9fb2-6799101a4b37-b4cb2fcf",
  "queryResult": {
    "queryText": "Yes",
    "parameters": {},
    "allRequiredParamsPresent": true,
    "outputContexts": [
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/awaiting_answers",
        "lifespanCount": 1
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/ticket",
        "lifespanCount": 49,
        "parameters": {
          "id": 38.0,
          "msisdn": "",
          "question": 0.0,
          "any": [
            "Reset my password"
          ],
          "any.original": [
            "Reset my password"
          ]
        }
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/awaiting_pinreset_enrollment_confirmation",
        "lifespanCount": 0
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/__system_counters__",
        "lifespanCount": 0,
        "parameters": {
          "no-input": 0.0,
          "no-match": 0.0
        }
      }
    ],
    "intent": {
      "name": "projects/the-attendant-hgawnh/agent/intents/799768aa-ff3f-4b08-9975-b5a572df8b66",
      "displayName": "usecase.pinreset.security.questions.affirmative"
    },
    "intentDetectionConfidence": 1.0,
    "languageCode": "en",
    "sentimentAnalysisResult": {
      "queryTextSentiment": {
        "score": 0.5,
        "magnitude": 0.5
      }
    }
  },
  "originalDetectIntentRequest": {
    "payload": {
      "NumMedia": "0",
      "To": "whatsapp:+14155238886",
      "ProfileName": "justicemacheyo",
      "SmsMessageSid": "SM684582b340db89d5bf19aa36ef8fbab1",
      "WaId": "263783324671",
      "Body": "Yes",
      "AccountSid": "ACeb9bc0506560f0c01a5358d1f3a45dec",
      "From": "whatsapp:+263783324671",
      "NumSegments": "1",
      "ApiVersion": "2010-04-01",
      "SmsStatus": "received",
      "SmsSid": "SM684582b340db89d5bf19aa36ef8fbab1",
      "MessageSid": "SM684582b340db89d5bf19aa36ef8fbab1"
    }
  },
  "session": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671"
}
 
.20:38:35.565 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow intent: usecase.pinreset.security.questions.affirmative 
.20:38:35.648 ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [/ecocashbotcore] threw exception [Request processing failed; nested exception is java.lang.NumberFormatException: For input string: "0.0"] with root cause 
java.lang.NumberFormatException: For input string: "0.0"
	at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
	at java.lang.Integer.parseInt(Integer.java:580)
	at java.lang.Integer.parseInt(Integer.java:615)
	at zw.co.cassavasmartech.ecocashchatbotcore.dialogflow.DialogFlowServiceImpl.pinresetUsecaseSecurityQuestionsAffirmativeHandler(DialogFlowServiceImpl.java:1027)
	at zw.co.cassavasmartech.ecocashchatbotcore.dialogflow.DialogFlowServiceImpl.processWebhookCall(DialogFlowServiceImpl.java:70)
	at zw.co.cassavasmartech.ecocashchatbotcore.controller.DialogFlowController.inbound(DialogFlowController.java:23)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1064)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:228)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at zw.co.cassavasmartech.ecocashchatbotcore.security.CustomFilter.doFilter(CustomFilter.java:15)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1723)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
.20:44:37.605 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default' 
.20:44:37.610 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated... 
.20:44:37.637 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed. 
.20:44:42.549 INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 6.2.0.Final 
.20:44:42.565 INFO  z.c.c.e.EcocashChatbotCoreApplication - Starting EcocashChatbotCoreApplication using Java 1.8.0_271 on LAPTOP-1JQH6S1S with PID 23560 (C:\Users\Kudzai Macheyo\IdeaProjects\ecocash-chatbot-core\target\classes started by Kudzai Macheyo in C:\Users\Kudzai Macheyo\IdeaProjects\ecocash-chatbot-core) 
.20:44:42.565 INFO  z.c.c.e.EcocashChatbotCoreApplication - The following profiles are active: dev 
.20:44:44.325 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode! 
.20:44:44.325 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFERRED mode. 
.20:44:44.462 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 124 ms. Found 8 JPA repository interfaces. 
.20:44:44.814 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@3104351d' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying) 
.20:44:44.821 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying) 
.20:44:45.338 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http) 
.20:44:45.347 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"] 
.20:44:45.347 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat] 
.20:44:45.347 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.50] 
.20:44:45.452 INFO  o.a.c.c.C.[.[.[/ecocashbotcore] - Initializing Spring embedded WebApplicationContext 
.20:44:45.452 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2833 ms 
.20:44:45.628 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default] 
.20:44:45.681 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.32.Final 
.20:44:45.712 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning 
.20:44:45.830 INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final} 
.20:44:45.847 INFO  o.s.s.l.DefaultSpringSecurityContextSource -  URL 'ldap://192.168.101.47:389', root DN is '' 
.20:44:45.934 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting... 
.20:44:46.985 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed. 
.20:44:47.022 INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.MySQL55Dialect 
.20:44:47.087 INFO  o.h.e.b.internal.EnversServiceImpl - Envers integration enabled? : true 
.20:44:48.094 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure Ant [pattern='/dialogflow/**'] with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@46fb0c33, org.springframework.security.web.context.SecurityContextPersistenceFilter@3c952a33, org.springframework.security.web.header.HeaderWriterFilter@56b8aaf1, org.springframework.security.web.authentication.logout.LogoutFilter@1e957e2f, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@738d37fc, zw.co.cassavasmartech.ecocashchatbotcore.security.CustomFilter@3b009e7b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1150d471, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1e225820, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@270a620, org.springframework.security.web.session.SessionManagementFilter@7412a438, org.springframework.security.web.access.ExceptionTranslationFilter@373e6b9d, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@684e8c9d] 
.20:44:48.099 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@58324c9f, org.springframework.security.web.context.SecurityContextPersistenceFilter@5a7df831, org.springframework.security.web.header.HeaderWriterFilter@4fc165f6, org.springframework.security.web.authentication.logout.LogoutFilter@19fd43da, zw.co.cassavasmartech.ecocashchatbotcore.security.JWTFilter@5d7d8613, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@667dcaad, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@22d7fd41, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6eb089e6, org.springframework.security.web.session.SessionManagementFilter@545b5ed0, org.springframework.security.web.access.ExceptionTranslationFilter@996a546, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@61ffd148] 
.20:44:49.446 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"] 
.20:44:49.548 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path '/ecocashbotcore' 
.20:44:49.557 INFO  o.s.d.r.c.DeferredRepositoryInitializationListener - Triggering deferred initialization of Spring Data repositoriesâ€¦ 
.20:44:50.818 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform] 
.20:44:50.836 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default' 
.20:44:52.286 INFO  o.s.d.r.c.DeferredRepositoryInitializationListener - Spring Data repositories initialized! 
.20:44:52.294 INFO  z.c.c.e.EcocashChatbotCoreApplication - Started EcocashChatbotCoreApplication in 10.112 seconds (JVM running for 10.608) 
.20:44:57.431 INFO  o.a.c.c.C.[.[.[/ecocashbotcore] - Initializing Spring DispatcherServlet 'dispatcherServlet' 
.20:44:57.431 INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet' 
.20:44:57.433 INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms 
.20:44:58.978 INFO  o.s.s.l.SpringSecurityLdapTemplate - Ignoring PartialResultException 
.20:44:59.195 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow transaction request {
  "responseId": "086ece2e-929a-4f5a-8fd0-2a3122692c1d-b4cb2fcf",
  "queryResult": {
    "queryText": "Reset my password",
    "parameters": {
      "any": [
        "Reset my password"
      ]
    },
    "allRequiredParamsPresent": true,
    "outputContexts": [
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/ticket",
        "lifespanCount": 48,
        "parameters": {
          "id": 38.0,
          "msisdn": "",
          "question": 0.0,
          "any": [
            "Reset my password"
          ],
          "any.original": [
            "Reset my password"
          ]
        }
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/awaiting_answers",
        "lifespanCount": 0,
        "parameters": {
          "any": [
            "Reset my password"
          ],
          "any.original": [
            "Reset my password"
          ]
        }
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/__system_counters__",
        "lifespanCount": 0,
        "parameters": {
          "no-input": 0.0,
          "no-match": 0.0,
          "any": [
            "Reset my password"
          ],
          "any.original": [
            "Reset my password"
          ]
        }
      }
    ],
    "intent": {
      "name": "projects/the-attendant-hgawnh/agent/intents/e3b607ca-bdcf-480e-9a59-ceb3098f0c67",
      "displayName": "usecase.pinreset.security.questions.first.answer"
    },
    "intentDetectionConfidence": 1.0,
    "languageCode": "en",
    "sentimentAnalysisResult": {
      "queryTextSentiment": {
        "score": -0.5,
        "magnitude": 0.5
      }
    }
  },
  "originalDetectIntentRequest": {
    "payload": {
      "NumMedia": "0",
      "Body": "Reset my password",
      "SmsMessageSid": "SM5187193d24a791527ce1c3a3fc2aab85",
      "SmsSid": "SM5187193d24a791527ce1c3a3fc2aab85",
      "AccountSid": "ACeb9bc0506560f0c01a5358d1f3a45dec",
      "ProfileName": "justicemacheyo",
      "WaId": "263783324671",
      "From": "whatsapp:+263783324671",
      "To": "whatsapp:+14155238886",
      "SmsStatus": "received",
      "ApiVersion": "2010-04-01",
      "MessageSid": "SM5187193d24a791527ce1c3a3fc2aab85",
      "NumSegments": "1"
    }
  },
  "session": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671"
}
 
.20:44:59.204 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow intent: usecase.pinreset.security.questions.first.answer 
.20:45:01.711 ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [/ecocashbotcore] threw exception [Request processing failed; nested exception is java.lang.ArrayIndexOutOfBoundsException: 1] with root cause 
java.lang.ArrayIndexOutOfBoundsException: 1
	at zw.co.cassavasmartech.ecocashchatbotcore.dialogflow.DialogFlowServiceImpl.pinresetUsecaseSecurityQuestionsFirstAnswerHandler(DialogFlowServiceImpl.java:993)
	at zw.co.cassavasmartech.ecocashchatbotcore.dialogflow.DialogFlowServiceImpl.processWebhookCall(DialogFlowServiceImpl.java:72)
	at zw.co.cassavasmartech.ecocashchatbotcore.controller.DialogFlowController.inbound(DialogFlowController.java:23)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1064)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:228)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at zw.co.cassavasmartech.ecocashchatbotcore.security.CustomFilter.doFilter(CustomFilter.java:15)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1723)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
.20:45:17.317 INFO  o.s.s.l.SpringSecurityLdapTemplate - Ignoring PartialResultException 
.20:45:17.504 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow transaction request {
  "responseId": "809fd67c-b166-41d1-9e4e-c6dd5054c8d5-b4cb2fcf",
  "queryResult": {
    "queryText": "Hello",
    "action": "input.welcome",
    "parameters": {},
    "allRequiredParamsPresent": true,
    "outputContexts": [
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/ticket",
        "lifespanCount": 47,
        "parameters": {
          "id": 38.0,
          "msisdn": "",
          "question": 0.0,
          "any": [
            "Reset my password"
          ],
          "any.original": [
            "Reset my password"
          ]
        }
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/__system_counters__",
        "lifespanCount": 0,
        "parameters": {
          "no-input": 0.0,
          "no-match": 0.0
        }
      }
    ],
    "intent": {
      "name": "projects/the-attendant-hgawnh/agent/intents/814ad089-d8e8-4b34-af51-753a7d3b27d3",
      "displayName": "Default Welcome Intent"
    },
    "intentDetectionConfidence": 1.0,
    "languageCode": "en",
    "sentimentAnalysisResult": {
      "queryTextSentiment": {
        "score": 0.2,
        "magnitude": 0.2
      }
    }
  },
  "originalDetectIntentRequest": {
    "payload": {
      "AccountSid": "ACeb9bc0506560f0c01a5358d1f3a45dec",
      "To": "whatsapp:+14155238886",
      "ProfileName": "justicemacheyo",
      "MessageSid": "SM2c49d3178e2386cce4af42c37ce6dfe4",
      "ApiVersion": "2010-04-01",
      "From": "whatsapp:+263783324671",
      "SmsMessageSid": "SM2c49d3178e2386cce4af42c37ce6dfe4",
      "NumMedia": "0",
      "NumSegments": "1",
      "SmsSid": "SM2c49d3178e2386cce4af42c37ce6dfe4",
      "WaId": "263783324671",
      "SmsStatus": "received",
      "Body": "Hello"
    }
  },
  "session": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671"
}
 
.20:45:17.512 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow intent: Default Welcome Intent 
.20:45:17.574 INFO  z.c.c.e.d.DialogFlowServiceImpl - Sending response to dialogFlow: {
  "fulfillmentText": "Welcome back DaglðŸ˜ƒðŸ‘‹ hope you are having a beautiful evening so far. What can I do for you today?",
  "source": "ecocashchatbotcore"
}
 
.20:45:26.093 INFO  o.s.s.l.SpringSecurityLdapTemplate - Ignoring PartialResultException 
.20:45:26.249 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow transaction request {
  "responseId": "df918c10-9805-4dc1-b20f-e0b42195ecb7-b4cb2fcf",
  "queryResult": {
    "queryText": "Reset my password",
    "parameters": {},
    "allRequiredParamsPresent": true,
    "outputContexts": [
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/awaiting_pinreset_enrollment_confirmation",
        "lifespanCount": 1
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/ticket",
        "lifespanCount": 46,
        "parameters": {
          "id": 38.0,
          "msisdn": "",
          "question": 0.0,
          "any": [
            "Reset my password"
          ],
          "any.original": [
            "Reset my password"
          ]
        }
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/__system_counters__",
        "lifespanCount": 0,
        "parameters": {
          "no-input": 0.0,
          "no-match": 0.0
        }
      }
    ],
    "intent": {
      "name": "projects/the-attendant-hgawnh/agent/intents/cbd27331-6c49-4632-8f75-a3398cb8b7d2",
      "displayName": "usecase.pinreset"
    },
    "intentDetectionConfidence": 0.72842085,
    "languageCode": "en",
    "sentimentAnalysisResult": {
      "queryTextSentiment": {
        "score": -0.5,
        "magnitude": 0.5
      }
    }
  },
  "originalDetectIntentRequest": {
    "payload": {
      "To": "whatsapp:+14155238886",
      "NumMedia": "0",
      "Body": "Reset my password",
      "ApiVersion": "2010-04-01",
      "SmsSid": "SM9ec05db849d2ad810ebf529e864d9f71",
      "ProfileName": "justicemacheyo",
      "MessageSid": "SM9ec05db849d2ad810ebf529e864d9f71",
      "From": "whatsapp:+263783324671",
      "NumSegments": "1",
      "AccountSid": "ACeb9bc0506560f0c01a5358d1f3a45dec",
      "WaId": "263783324671",
      "SmsStatus": "received",
      "SmsMessageSid": "SM9ec05db849d2ad810ebf529e864d9f71"
    }
  },
  "session": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671"
}
 
.20:45:26.249 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow intent: usecase.pinreset 
.20:45:26.566 INFO  z.c.c.e.d.DialogFlowServiceImpl - Sending response to dialogFlow: {
  "fulfillmentText": "Great!! I can see you are enrolled on our self service platformðŸ˜ƒmay I go on to ask your security questions to verify your identity?",
  "source": "ecocashchatbotcore",
  "outputContexts": [
    {
      "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/ticket",
      "lifespanCount": 50,
      "parameters": {
        "id": 39,
        "question": 0
      }
    }
  ]
}
 
.20:45:35.601 INFO  o.s.s.l.SpringSecurityLdapTemplate - Ignoring PartialResultException 
.20:45:35.750 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow transaction request {
  "responseId": "595d0466-f263-46bb-a863-9cf0a9cade29-b4cb2fcf",
  "queryResult": {
    "queryText": "Yes",
    "parameters": {},
    "allRequiredParamsPresent": true,
    "outputContexts": [
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/awaiting_answers",
        "lifespanCount": 1
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/ticket",
        "lifespanCount": 49,
        "parameters": {
          "id": 39.0,
          "msisdn": "",
          "question": 0.0,
          "any": [
            "Reset my password"
          ],
          "any.original": [
            "Reset my password"
          ]
        }
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/awaiting_pinreset_enrollment_confirmation",
        "lifespanCount": 0
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/__system_counters__",
        "lifespanCount": 0,
        "parameters": {
          "no-input": 0.0,
          "no-match": 0.0
        }
      }
    ],
    "intent": {
      "name": "projects/the-attendant-hgawnh/agent/intents/799768aa-ff3f-4b08-9975-b5a572df8b66",
      "displayName": "usecase.pinreset.security.questions.affirmative"
    },
    "intentDetectionConfidence": 1.0,
    "languageCode": "en",
    "sentimentAnalysisResult": {
      "queryTextSentiment": {
        "score": 0.5,
        "magnitude": 0.5
      }
    }
  },
  "originalDetectIntentRequest": {
    "payload": {
      "SmsStatus": "received",
      "SmsSid": "SM736e7b0d9d3582a86eb19a56811a5dcd",
      "ProfileName": "justicemacheyo",
      "WaId": "263783324671",
      "MessageSid": "SM736e7b0d9d3582a86eb19a56811a5dcd",
      "SmsMessageSid": "SM736e7b0d9d3582a86eb19a56811a5dcd",
      "Body": "Yes",
      "NumMedia": "0",
      "From": "whatsapp:+263783324671",
      "NumSegments": "1",
      "To": "whatsapp:+14155238886",
      "ApiVersion": "2010-04-01",
      "AccountSid": "ACeb9bc0506560f0c01a5358d1f3a45dec"
    }
  },
  "session": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671"
}
 
.20:45:35.758 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow intent: usecase.pinreset.security.questions.affirmative 
.20:45:35.831 ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [/ecocashbotcore] threw exception [Request processing failed; nested exception is java.lang.NumberFormatException: For input string: "0.0"] with root cause 
java.lang.NumberFormatException: For input string: "0.0"
	at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
	at java.lang.Integer.parseInt(Integer.java:580)
	at java.lang.Integer.parseInt(Integer.java:615)
	at zw.co.cassavasmartech.ecocashchatbotcore.dialogflow.DialogFlowServiceImpl.pinresetUsecaseSecurityQuestionsAffirmativeHandler(DialogFlowServiceImpl.java:1027)
	at zw.co.cassavasmartech.ecocashchatbotcore.dialogflow.DialogFlowServiceImpl.processWebhookCall(DialogFlowServiceImpl.java:70)
	at zw.co.cassavasmartech.ecocashchatbotcore.controller.DialogFlowController.inbound(DialogFlowController.java:23)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1064)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:228)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at zw.co.cassavasmartech.ecocashchatbotcore.security.CustomFilter.doFilter(CustomFilter.java:15)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1723)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
.20:51:51.078 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default' 
.20:51:51.080 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated... 
.20:51:51.094 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed. 
.20:52:03.517 INFO  z.c.c.e.EcocashChatbotCoreApplication - Starting EcocashChatbotCoreApplication using Java 1.8.0_271 on LAPTOP-1JQH6S1S with PID 22856 (C:\Users\Kudzai Macheyo\IdeaProjects\ecocash-chatbot-core\target\classes started by Kudzai Macheyo in C:\Users\Kudzai Macheyo\IdeaProjects\ecocash-chatbot-core) 
.20:52:03.509 INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 6.2.0.Final 
.20:52:03.525 INFO  z.c.c.e.EcocashChatbotCoreApplication - The following profiles are active: dev 
.20:52:05.523 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode! 
.20:52:05.524 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFERRED mode. 
.20:52:05.681 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 144 ms. Found 8 JPA repository interfaces. 
.20:52:06.012 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@6b474074' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying) 
.20:52:06.017 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying) 
.20:52:07.302 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http) 
.20:52:07.304 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"] 
.20:52:07.304 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat] 
.20:52:07.304 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.50] 
.20:52:07.406 INFO  o.a.c.c.C.[.[.[/ecocashbotcore] - Initializing Spring embedded WebApplicationContext 
.20:52:07.406 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3617 ms 
.20:52:07.869 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default] 
.20:52:08.209 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.32.Final 
.20:52:08.221 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning 
.20:52:08.602 INFO  o.s.s.l.DefaultSpringSecurityContextSource -  URL 'ldap://192.168.101.47:389', root DN is '' 
.20:52:08.616 INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final} 
.20:52:08.735 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting... 
.20:52:09.029 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed. 
.20:52:09.191 INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.MySQL55Dialect 
.20:52:09.544 INFO  o.h.e.b.internal.EnversServiceImpl - Envers integration enabled? : true 
.20:52:13.347 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure Ant [pattern='/dialogflow/**'] with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@545b5ed0, org.springframework.security.web.context.SecurityContextPersistenceFilter@6003ad65, org.springframework.security.web.header.HeaderWriterFilter@654e6a90, org.springframework.security.web.authentication.logout.LogoutFilter@66fbc5e7, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@69de5bed, zw.co.cassavasmartech.ecocashchatbotcore.security.CustomFilter@5a7df831, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@60743cdb, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4dcbae55, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@667dcaad, org.springframework.security.web.session.SessionManagementFilter@4be0a27d, org.springframework.security.web.access.ExceptionTranslationFilter@1150d471, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@6fa2448b] 
.20:52:13.350 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@12f279b5, org.springframework.security.web.context.SecurityContextPersistenceFilter@2e5e6fc4, org.springframework.security.web.header.HeaderWriterFilter@1cc8416a, org.springframework.security.web.authentication.logout.LogoutFilter@68ab6ab0, zw.co.cassavasmartech.ecocashchatbotcore.security.JWTFilter@5ff6dd3c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2785db06, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@79980d8d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5fcd1f0a, org.springframework.security.web.session.SessionManagementFilter@331ff3ac, org.springframework.security.web.access.ExceptionTranslationFilter@604d23fa, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@2a47597] 
.20:52:14.551 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"] 
.20:52:14.569 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path '/ecocashbotcore' 
.20:52:14.571 INFO  o.s.d.r.c.DeferredRepositoryInitializationListener - Triggering deferred initialization of Spring Data repositoriesâ€¦ 
.20:52:15.915 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform] 
.20:52:15.923 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default' 
.20:52:17.320 INFO  o.s.d.r.c.DeferredRepositoryInitializationListener - Spring Data repositories initialized! 
.20:52:17.328 INFO  z.c.c.e.EcocashChatbotCoreApplication - Started EcocashChatbotCoreApplication in 14.671 seconds (JVM running for 16.036) 
.20:52:26.601 INFO  o.a.c.c.C.[.[.[/ecocashbotcore] - Initializing Spring DispatcherServlet 'dispatcherServlet' 
.20:52:26.601 INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet' 
.20:52:26.601 INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 0 ms 
.20:52:26.805 INFO  o.s.s.l.SpringSecurityLdapTemplate - Ignoring PartialResultException 
.20:52:27.031 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow transaction request {
  "responseId": "646b5e86-8897-4b23-adac-82e0d4665470-b4cb2fcf",
  "queryResult": {
    "queryText": "Hi",
    "action": "input.welcome",
    "parameters": {},
    "allRequiredParamsPresent": true,
    "outputContexts": [
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/ticket",
        "lifespanCount": 48,
        "parameters": {
          "id": 39.0,
          "msisdn": "",
          "question": 0.0,
          "any": [
            "Reset my password"
          ],
          "any.original": [
            "Reset my password"
          ]
        }
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/awaiting_answers",
        "lifespanCount": 0
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/__system_counters__",
        "lifespanCount": 0,
        "parameters": {
          "no-input": 0.0,
          "no-match": 0.0
        }
      }
    ],
    "intent": {
      "name": "projects/the-attendant-hgawnh/agent/intents/814ad089-d8e8-4b34-af51-753a7d3b27d3",
      "displayName": "Default Welcome Intent"
    },
    "intentDetectionConfidence": 1.0,
    "languageCode": "en",
    "sentimentAnalysisResult": {
      "queryTextSentiment": {
        "score": 0.2,
        "magnitude": 0.2
      }
    }
  },
  "originalDetectIntentRequest": {
    "payload": {
      "Body": "Hi",
      "ApiVersion": "2010-04-01",
      "AccountSid": "ACeb9bc0506560f0c01a5358d1f3a45dec",
      "To": "whatsapp:+14155238886",
      "ProfileName": "justicemacheyo",
      "SmsSid": "SM6c0240489dea33240efdcf0d441ba6f5",
      "SmsStatus": "received",
      "SmsMessageSid": "SM6c0240489dea33240efdcf0d441ba6f5",
      "NumSegments": "1",
      "NumMedia": "0",
      "From": "whatsapp:+263783324671",
      "WaId": "263783324671",
      "MessageSid": "SM6c0240489dea33240efdcf0d441ba6f5"
    }
  },
  "session": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671"
}
 
.20:52:27.038 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow intent: Default Welcome Intent 
.20:52:27.155 INFO  z.c.c.e.d.DialogFlowServiceImpl - Sending response to dialogFlow: {
  "fulfillmentText": "Welcome back DaglðŸ˜ƒðŸ‘‹ hope you are having a beautiful evening so far. What can I do for you today?",
  "source": "ecocashchatbotcore"
}
 
.20:52:40.104 INFO  o.s.s.l.SpringSecurityLdapTemplate - Ignoring PartialResultException 
.20:52:40.279 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow transaction request {
  "responseId": "15e370e7-ca44-4cc3-875f-cf198bbdb43e-b4cb2fcf",
  "queryResult": {
    "queryText": "Reset my pin",
    "parameters": {},
    "allRequiredParamsPresent": true,
    "outputContexts": [
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/awaiting_pinreset_enrollment_confirmation",
        "lifespanCount": 1
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/ticket",
        "lifespanCount": 47,
        "parameters": {
          "id": 39.0,
          "msisdn": "",
          "question": 0.0,
          "any": [
            "Reset my password"
          ],
          "any.original": [
            "Reset my password"
          ]
        }
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/__system_counters__",
        "lifespanCount": 0,
        "parameters": {
          "no-input": 0.0,
          "no-match": 0.0
        }
      }
    ],
    "intent": {
      "name": "projects/the-attendant-hgawnh/agent/intents/cbd27331-6c49-4632-8f75-a3398cb8b7d2",
      "displayName": "usecase.pinreset"
    },
    "intentDetectionConfidence": 0.8193823,
    "languageCode": "en",
    "sentimentAnalysisResult": {
      "queryTextSentiment": {
        "score": -0.4,
        "magnitude": 0.4
      }
    }
  },
  "originalDetectIntentRequest": {
    "payload": {
      "NumMedia": "0",
      "SmsSid": "SM4bca7ed2d49a4c967d2e8be7e6ea7a7d",
      "To": "whatsapp:+14155238886",
      "NumSegments": "1",
      "MessageSid": "SM4bca7ed2d49a4c967d2e8be7e6ea7a7d",
      "Body": "Reset my pin",
      "ApiVersion": "2010-04-01",
      "WaId": "263783324671",
      "From": "whatsapp:+263783324671",
      "SmsMessageSid": "SM4bca7ed2d49a4c967d2e8be7e6ea7a7d",
      "SmsStatus": "received",
      "ProfileName": "justicemacheyo",
      "AccountSid": "ACeb9bc0506560f0c01a5358d1f3a45dec"
    }
  },
  "session": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671"
}
 
.20:52:40.288 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow intent: usecase.pinreset 
.20:52:40.709 INFO  z.c.c.e.d.DialogFlowServiceImpl - Sending response to dialogFlow: {
  "fulfillmentText": "Great!! I can see you are enrolled on our self service platformðŸ˜ƒmay I go on to ask your security questions to verify your identity?",
  "source": "ecocashchatbotcore",
  "outputContexts": [
    {
      "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/ticket",
      "lifespanCount": 50,
      "parameters": {
        "id": 40,
        "question": 0
      }
    }
  ]
}
 
.20:52:49.376 INFO  o.s.s.l.SpringSecurityLdapTemplate - Ignoring PartialResultException 
.20:52:49.547 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow transaction request {
  "responseId": "d89b0cca-9849-4a6f-a8e5-e19edff5b3c5-b4cb2fcf",
  "queryResult": {
    "queryText": "Yes",
    "parameters": {},
    "allRequiredParamsPresent": true,
    "outputContexts": [
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/awaiting_answers",
        "lifespanCount": 1
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/ticket",
        "lifespanCount": 49,
        "parameters": {
          "id": 40.0,
          "msisdn": "",
          "question": 0.0,
          "any": [
            "Reset my password"
          ],
          "any.original": [
            "Reset my password"
          ]
        }
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/awaiting_pinreset_enrollment_confirmation",
        "lifespanCount": 0
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/__system_counters__",
        "lifespanCount": 0,
        "parameters": {
          "no-input": 0.0,
          "no-match": 0.0
        }
      }
    ],
    "intent": {
      "name": "projects/the-attendant-hgawnh/agent/intents/799768aa-ff3f-4b08-9975-b5a572df8b66",
      "displayName": "usecase.pinreset.security.questions.affirmative"
    },
    "intentDetectionConfidence": 1.0,
    "languageCode": "en",
    "sentimentAnalysisResult": {
      "queryTextSentiment": {
        "score": 0.5,
        "magnitude": 0.5
      }
    }
  },
  "originalDetectIntentRequest": {
    "payload": {
      "MessageSid": "SMedf66d3ded199271a7a4592dea5aff97",
      "AccountSid": "ACeb9bc0506560f0c01a5358d1f3a45dec",
      "WaId": "263783324671",
      "To": "whatsapp:+14155238886",
      "ApiVersion": "2010-04-01",
      "SmsMessageSid": "SMedf66d3ded199271a7a4592dea5aff97",
      "SmsStatus": "received",
      "ProfileName": "justicemacheyo",
      "SmsSid": "SMedf66d3ded199271a7a4592dea5aff97",
      "NumSegments": "1",
      "From": "whatsapp:+263783324671",
      "Body": "Yes",
      "NumMedia": "0"
    }
  },
  "session": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671"
}
 
.20:52:49.547 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow intent: usecase.pinreset.security.questions.affirmative 
.20:52:49.669 ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [/ecocashbotcore] threw exception [Request processing failed; nested exception is java.lang.NumberFormatException: For input string: "0.0"] with root cause 
java.lang.NumberFormatException: For input string: "0.0"
	at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
	at java.lang.Integer.parseInt(Integer.java:580)
	at java.lang.Integer.parseInt(Integer.java:615)
	at zw.co.cassavasmartech.ecocashchatbotcore.dialogflow.DialogFlowServiceImpl.pinresetUsecaseSecurityQuestionsAffirmativeHandler(DialogFlowServiceImpl.java:1027)
	at zw.co.cassavasmartech.ecocashchatbotcore.dialogflow.DialogFlowServiceImpl.processWebhookCall(DialogFlowServiceImpl.java:70)
	at zw.co.cassavasmartech.ecocashchatbotcore.controller.DialogFlowController.inbound(DialogFlowController.java:23)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1064)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:228)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at zw.co.cassavasmartech.ecocashchatbotcore.security.CustomFilter.doFilter(CustomFilter.java:15)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1723)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
.20:54:01.283 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default' 
.20:54:01.286 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated... 
.20:54:01.300 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed. 
.20:54:09.199 INFO  z.c.c.e.EcocashChatbotCoreApplication - Starting EcocashChatbotCoreApplication using Java 1.8.0_271 on LAPTOP-1JQH6S1S with PID 20004 (C:\Users\Kudzai Macheyo\IdeaProjects\ecocash-chatbot-core\target\classes started by Kudzai Macheyo in C:\Users\Kudzai Macheyo\IdeaProjects\ecocash-chatbot-core) 
.20:54:09.198 INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 6.2.0.Final 
.20:54:09.201 INFO  z.c.c.e.EcocashChatbotCoreApplication - The following profiles are active: dev 
.20:54:11.007 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode! 
.20:54:11.008 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFERRED mode. 
.20:54:11.765 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 719 ms. Found 8 JPA repository interfaces. 
.20:54:12.265 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@3b08f438' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying) 
.20:54:12.301 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying) 
.20:54:13.499 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http) 
.20:54:13.505 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"] 
.20:54:13.505 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat] 
.20:54:13.505 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.50] 
.20:54:13.610 INFO  o.a.c.c.C.[.[.[/ecocashbotcore] - Initializing Spring embedded WebApplicationContext 
.20:54:13.610 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4364 ms 
.20:54:13.794 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default] 
.20:54:13.852 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.32.Final 
.20:54:13.863 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning 
.20:54:14.533 INFO  o.s.s.l.DefaultSpringSecurityContextSource -  URL 'ldap://192.168.101.47:389', root DN is '' 
.20:54:14.556 INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final} 
.20:54:14.947 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting... 
.20:54:15.551 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed. 
.20:54:15.762 INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.MySQL55Dialect 
.20:54:16.030 INFO  o.h.e.b.internal.EnversServiceImpl - Envers integration enabled? : true 
.20:54:18.685 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure Ant [pattern='/dialogflow/**'] with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@603cabc4, org.springframework.security.web.context.SecurityContextPersistenceFilter@14168e1, org.springframework.security.web.header.HeaderWriterFilter@33bb3f86, org.springframework.security.web.authentication.logout.LogoutFilter@4041739c, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@3b009e7b, zw.co.cassavasmartech.ecocashchatbotcore.security.CustomFilter@67fa5045, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1e225820, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4be0a27d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6f347d7, org.springframework.security.web.session.SessionManagementFilter@709f0202, org.springframework.security.web.access.ExceptionTranslationFilter@61615b4a, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@773014d3] 
.20:54:18.690 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@abad89c, org.springframework.security.web.context.SecurityContextPersistenceFilter@115dcaea, org.springframework.security.web.header.HeaderWriterFilter@2c748a15, org.springframework.security.web.authentication.logout.LogoutFilter@834e986, zw.co.cassavasmartech.ecocashchatbotcore.security.JWTFilter@602f8f94, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@cfd1075, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@45117dd, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@42507640, org.springframework.security.web.session.SessionManagementFilter@19fd43da, org.springframework.security.web.access.ExceptionTranslationFilter@22d7fd41, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@3bc69ce9] 
.20:54:19.874 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"] 
.20:54:19.944 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path '/ecocashbotcore' 
.20:54:19.946 INFO  o.s.d.r.c.DeferredRepositoryInitializationListener - Triggering deferred initialization of Spring Data repositoriesâ€¦ 
.20:54:21.340 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform] 
.20:54:21.347 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default' 
.20:54:22.583 INFO  o.s.d.r.c.DeferredRepositoryInitializationListener - Spring Data repositories initialized! 
.20:54:22.616 INFO  z.c.c.e.EcocashChatbotCoreApplication - Started EcocashChatbotCoreApplication in 13.79 seconds (JVM running for 15.105) 
.20:54:35.461 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default' 
.20:54:35.464 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated... 
.20:54:35.472 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed. 
.20:54:37.967 INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 6.2.0.Final 
.20:54:37.973 INFO  z.c.c.e.EcocashChatbotCoreApplication - Starting EcocashChatbotCoreApplication using Java 1.8.0_271 on LAPTOP-1JQH6S1S with PID 22832 (C:\Users\Kudzai Macheyo\IdeaProjects\ecocash-chatbot-core\target\classes started by Kudzai Macheyo in C:\Users\Kudzai Macheyo\IdeaProjects\ecocash-chatbot-core) 
.20:54:37.974 INFO  z.c.c.e.EcocashChatbotCoreApplication - The following profiles are active: dev 
.20:54:38.953 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode! 
.20:54:38.953 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFERRED mode. 
.20:54:39.073 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 111 ms. Found 8 JPA repository interfaces. 
.20:54:39.415 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@7a344b65' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying) 
.20:54:39.422 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying) 
.20:54:39.899 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http) 
.20:54:39.906 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"] 
.20:54:39.907 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat] 
.20:54:39.907 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.50] 
.20:54:39.997 INFO  o.a.c.c.C.[.[.[/ecocashbotcore] - Initializing Spring embedded WebApplicationContext 
.20:54:39.997 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1979 ms 
.20:54:40.168 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default] 
.20:54:40.213 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.32.Final 
.20:54:40.235 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning 
.20:54:40.349 INFO  o.s.s.l.DefaultSpringSecurityContextSource -  URL 'ldap://192.168.101.47:389', root DN is '' 
.20:54:40.365 INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final} 
.20:54:40.477 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting... 
.20:54:40.656 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed. 
.20:54:40.688 INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.MySQL55Dialect 
.20:54:40.751 INFO  o.h.e.b.internal.EnversServiceImpl - Envers integration enabled? : true 
.20:54:41.669 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure Ant [pattern='/dialogflow/**'] with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@270a620, org.springframework.security.web.context.SecurityContextPersistenceFilter@1150d471, org.springframework.security.web.header.HeaderWriterFilter@10244722, org.springframework.security.web.authentication.logout.LogoutFilter@3db432c2, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@61bb1e4d, zw.co.cassavasmartech.ecocashchatbotcore.security.CustomFilter@41f4039e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@654e6a90, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2a2dc0a, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5ff00507, org.springframework.security.web.session.SessionManagementFilter@3c952a33, org.springframework.security.web.access.ExceptionTranslationFilter@56b8aaf1, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@31973858] 
.20:54:41.671 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6eb089e6, org.springframework.security.web.context.SecurityContextPersistenceFilter@22d7fd41, org.springframework.security.web.header.HeaderWriterFilter@5a7df831, org.springframework.security.web.authentication.logout.LogoutFilter@cfd1075, zw.co.cassavasmartech.ecocashchatbotcore.security.JWTFilter@715a70e9, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2c748a15, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@19fd43da, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3bc69ce9, org.springframework.security.web.session.SessionManagementFilter@667dcaad, org.springframework.security.web.access.ExceptionTranslationFilter@545b5ed0, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@5d7d8613] 
.20:54:42.059 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"] 
.20:54:42.082 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path '/ecocashbotcore' 
.20:54:42.082 INFO  o.s.d.r.c.DeferredRepositoryInitializationListener - Triggering deferred initialization of Spring Data repositoriesâ€¦ 
.20:54:42.704 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform] 
.20:54:42.712 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default' 
.20:54:43.249 INFO  o.s.d.r.c.DeferredRepositoryInitializationListener - Spring Data repositories initialized! 
.20:54:43.257 INFO  z.c.c.e.EcocashChatbotCoreApplication - Started EcocashChatbotCoreApplication in 5.648 seconds (JVM running for 6.796) 
.20:55:51.552 INFO  o.a.c.c.C.[.[.[/ecocashbotcore] - Initializing Spring DispatcherServlet 'dispatcherServlet' 
.20:55:51.553 INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet' 
.20:55:51.554 INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms 
.20:55:51.704 INFO  o.s.s.l.SpringSecurityLdapTemplate - Ignoring PartialResultException 
.20:55:51.919 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow transaction request {
  "responseId": "d2481387-f295-4d27-826a-0529293094c6-b4cb2fcf",
  "queryResult": {
    "queryText": "Hi",
    "action": "input.welcome",
    "parameters": {},
    "allRequiredParamsPresent": true,
    "outputContexts": [
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/ticket",
        "lifespanCount": 48,
        "parameters": {
          "id": 40.0,
          "msisdn": "",
          "question": 0.0,
          "any": [
            "Reset my password"
          ],
          "any.original": [
            "Reset my password"
          ]
        }
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/awaiting_answers",
        "lifespanCount": 0
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/__system_counters__",
        "lifespanCount": 0,
        "parameters": {
          "no-input": 0.0,
          "no-match": 0.0
        }
      }
    ],
    "intent": {
      "name": "projects/the-attendant-hgawnh/agent/intents/814ad089-d8e8-4b34-af51-753a7d3b27d3",
      "displayName": "Default Welcome Intent"
    },
    "intentDetectionConfidence": 1.0,
    "languageCode": "en",
    "sentimentAnalysisResult": {
      "queryTextSentiment": {
        "score": 0.2,
        "magnitude": 0.2
      }
    }
  },
  "originalDetectIntentRequest": {
    "payload": {
      "Body": "Hi",
      "MessageSid": "SM0c50a3cca0bc72358c1fa3a31f58ae8b",
      "SmsMessageSid": "SM0c50a3cca0bc72358c1fa3a31f58ae8b",
      "ApiVersion": "2010-04-01",
      "NumMedia": "0",
      "SmsSid": "SM0c50a3cca0bc72358c1fa3a31f58ae8b",
      "From": "whatsapp:+263783324671",
      "To": "whatsapp:+14155238886",
      "ProfileName": "justicemacheyo",
      "WaId": "263783324671",
      "SmsStatus": "received",
      "NumSegments": "1",
      "AccountSid": "ACeb9bc0506560f0c01a5358d1f3a45dec"
    }
  },
  "session": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671"
}
 
.20:55:51.929 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow intent: Default Welcome Intent 
.20:55:52.032 INFO  z.c.c.e.d.DialogFlowServiceImpl - Sending response to dialogFlow: {
  "fulfillmentText": "Welcome back DaglðŸ˜ƒðŸ‘‹ hope you are having a beautiful evening so far. What can I do for you today?",
  "source": "ecocashchatbotcore"
}
 
.20:56:01.475 INFO  o.s.s.l.SpringSecurityLdapTemplate - Ignoring PartialResultException 
.20:56:01.541 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow transaction request {
  "responseId": "4c4b2192-15b1-46cf-9b9e-367d4dab6d4f-b4cb2fcf",
  "queryResult": {
    "queryText": "Reset my pin",
    "parameters": {},
    "allRequiredParamsPresent": true,
    "outputContexts": [
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/awaiting_pinreset_enrollment_confirmation",
        "lifespanCount": 1
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/ticket",
        "lifespanCount": 47,
        "parameters": {
          "id": 40.0,
          "msisdn": "",
          "question": 0.0,
          "any": [
            "Reset my password"
          ],
          "any.original": [
            "Reset my password"
          ]
        }
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/__system_counters__",
        "lifespanCount": 0,
        "parameters": {
          "no-input": 0.0,
          "no-match": 0.0
        }
      }
    ],
    "intent": {
      "name": "projects/the-attendant-hgawnh/agent/intents/cbd27331-6c49-4632-8f75-a3398cb8b7d2",
      "displayName": "usecase.pinreset"
    },
    "intentDetectionConfidence": 0.8193823,
    "languageCode": "en",
    "sentimentAnalysisResult": {
      "queryTextSentiment": {
        "score": -0.4,
        "magnitude": 0.4
      }
    }
  },
  "originalDetectIntentRequest": {
    "payload": {
      "SmsMessageSid": "SMe6795a0d16316510f62f38ca4d6c4e83",
      "To": "whatsapp:+14155238886",
      "SmsStatus": "received",
      "ProfileName": "justicemacheyo",
      "Body": "Reset my pin",
      "AccountSid": "ACeb9bc0506560f0c01a5358d1f3a45dec",
      "NumMedia": "0",
      "WaId": "263783324671",
      "SmsSid": "SMe6795a0d16316510f62f38ca4d6c4e83",
      "From": "whatsapp:+263783324671",
      "ApiVersion": "2010-04-01",
      "NumSegments": "1",
      "MessageSid": "SMe6795a0d16316510f62f38ca4d6c4e83"
    }
  },
  "session": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671"
}
 
.20:56:01.546 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow intent: usecase.pinreset 
.20:56:01.774 INFO  z.c.c.e.d.DialogFlowServiceImpl - Sending response to dialogFlow: {
  "fulfillmentText": "Great!! I can see you are enrolled on our self service platformðŸ˜ƒmay I go on to ask your security questions to verify your identity?",
  "source": "ecocashchatbotcore",
  "outputContexts": [
    {
      "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/ticket",
      "lifespanCount": 50,
      "parameters": {
        "id": 41,
        "question": 0
      }
    }
  ]
}
 
.20:56:07.224 INFO  o.s.s.l.SpringSecurityLdapTemplate - Ignoring PartialResultException 
.20:56:07.337 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow transaction request {
  "responseId": "792eb843-b591-4576-b7c1-d73392e910a7-b4cb2fcf",
  "queryResult": {
    "queryText": "Yes",
    "parameters": {},
    "allRequiredParamsPresent": true,
    "outputContexts": [
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/awaiting_answers",
        "lifespanCount": 1
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/ticket",
        "lifespanCount": 49,
        "parameters": {
          "id": 41.0,
          "msisdn": "",
          "question": 0.0,
          "any": [
            "Reset my password"
          ],
          "any.original": [
            "Reset my password"
          ]
        }
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/awaiting_pinreset_enrollment_confirmation",
        "lifespanCount": 0
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/__system_counters__",
        "lifespanCount": 0,
        "parameters": {
          "no-input": 0.0,
          "no-match": 0.0
        }
      }
    ],
    "intent": {
      "name": "projects/the-attendant-hgawnh/agent/intents/799768aa-ff3f-4b08-9975-b5a572df8b66",
      "displayName": "usecase.pinreset.security.questions.affirmative"
    },
    "intentDetectionConfidence": 1.0,
    "languageCode": "en",
    "sentimentAnalysisResult": {
      "queryTextSentiment": {
        "score": 0.5,
        "magnitude": 0.5
      }
    }
  },
  "originalDetectIntentRequest": {
    "payload": {
      "From": "whatsapp:+263783324671",
      "AccountSid": "ACeb9bc0506560f0c01a5358d1f3a45dec",
      "SmsMessageSid": "SM47ef951aca7bf9f6cab7e42068d5eed1",
      "ProfileName": "justicemacheyo",
      "ApiVersion": "2010-04-01",
      "MessageSid": "SM47ef951aca7bf9f6cab7e42068d5eed1",
      "To": "whatsapp:+14155238886",
      "NumSegments": "1",
      "Body": "Yes",
      "WaId": "263783324671",
      "NumMedia": "0",
      "SmsStatus": "received",
      "SmsSid": "SM47ef951aca7bf9f6cab7e42068d5eed1"
    }
  },
  "session": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671"
}
 
.20:56:07.338 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow intent: usecase.pinreset.security.questions.affirmative 
.20:56:07.438 ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [/ecocashbotcore] threw exception [Request processing failed; nested exception is java.lang.NumberFormatException: For input string: "0.0"] with root cause 
java.lang.NumberFormatException: For input string: "0.0"
	at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
	at java.lang.Integer.parseInt(Integer.java:580)
	at java.lang.Integer.parseInt(Integer.java:615)
	at zw.co.cassavasmartech.ecocashchatbotcore.dialogflow.DialogFlowServiceImpl.pinresetUsecaseSecurityQuestionsAffirmativeHandler(DialogFlowServiceImpl.java:1027)
	at zw.co.cassavasmartech.ecocashchatbotcore.dialogflow.DialogFlowServiceImpl.processWebhookCall(DialogFlowServiceImpl.java:70)
	at zw.co.cassavasmartech.ecocashchatbotcore.controller.DialogFlowController.inbound(DialogFlowController.java:23)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1064)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:228)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at zw.co.cassavasmartech.ecocashchatbotcore.security.CustomFilter.doFilter(CustomFilter.java:15)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1723)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
.20:56:50.609 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default' 
.20:56:50.612 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated... 
.20:56:50.626 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed. 
.20:56:59.377 INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 6.2.0.Final 
.20:56:59.400 INFO  z.c.c.e.EcocashChatbotCoreApplication - Starting EcocashChatbotCoreApplication using Java 1.8.0_271 on LAPTOP-1JQH6S1S with PID 5916 (C:\Users\Kudzai Macheyo\IdeaProjects\ecocash-chatbot-core\target\classes started by Kudzai Macheyo in C:\Users\Kudzai Macheyo\IdeaProjects\ecocash-chatbot-core) 
.20:56:59.400 INFO  z.c.c.e.EcocashChatbotCoreApplication - The following profiles are active: dev 
.20:57:01.500 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode! 
.20:57:01.506 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFERRED mode. 
.20:57:01.903 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 377 ms. Found 8 JPA repository interfaces. 
.20:57:02.870 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@3104351d' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying) 
.20:57:02.889 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying) 
.20:57:04.191 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http) 
.20:57:04.216 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"] 
.20:57:04.216 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat] 
.20:57:04.216 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.50] 
.20:57:04.514 INFO  o.a.c.c.C.[.[.[/ecocashbotcore] - Initializing Spring embedded WebApplicationContext 
.20:57:04.517 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 5017 ms 
.20:57:04.970 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default] 
.20:57:05.114 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.32.Final 
.20:57:05.132 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning 
.20:57:05.459 INFO  o.s.s.l.DefaultSpringSecurityContextSource -  URL 'ldap://192.168.101.47:389', root DN is '' 
.20:57:05.475 INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final} 
.20:57:05.789 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting... 
.20:57:06.244 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed. 
.20:57:06.323 INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.MySQL55Dialect 
.20:57:06.494 INFO  o.h.e.b.internal.EnversServiceImpl - Envers integration enabled? : true 
.20:57:08.971 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure Ant [pattern='/dialogflow/**'] with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6f347d7, org.springframework.security.web.context.SecurityContextPersistenceFilter@1e225820, org.springframework.security.web.header.HeaderWriterFilter@6ac4c3f7, org.springframework.security.web.authentication.logout.LogoutFilter@627ff1b8, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@41f4039e, zw.co.cassavasmartech.ecocashchatbotcore.security.CustomFilter@5974b233, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2a2dc0a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6003ad65, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5c134052, org.springframework.security.web.session.SessionManagementFilter@14168e1, org.springframework.security.web.access.ExceptionTranslationFilter@4c19d42e, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@10850d17] 
.20:57:08.991 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@42507640, org.springframework.security.web.context.SecurityContextPersistenceFilter@45117dd, org.springframework.security.web.header.HeaderWriterFilter@115dcaea, org.springframework.security.web.authentication.logout.LogoutFilter@604d23fa, zw.co.cassavasmartech.ecocashchatbotcore.security.JWTFilter@4dfe8b37, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7741771e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@834e986, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@11dcd42c, org.springframework.security.web.session.SessionManagementFilter@cfd1075, org.springframework.security.web.access.ExceptionTranslationFilter@19fd43da, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@602f8f94] 
.20:57:09.978 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"] 
.20:57:10.019 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path '/ecocashbotcore' 
.20:57:10.019 INFO  o.s.d.r.c.DeferredRepositoryInitializationListener - Triggering deferred initialization of Spring Data repositoriesâ€¦ 
.20:57:11.545 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform] 
.20:57:11.563 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default' 
.20:57:13.007 INFO  o.s.d.r.c.DeferredRepositoryInitializationListener - Spring Data repositories initialized! 
.20:57:13.020 INFO  z.c.c.e.EcocashChatbotCoreApplication - Started EcocashChatbotCoreApplication in 14.63 seconds (JVM running for 16.02) 
.20:57:28.079 INFO  o.a.c.c.C.[.[.[/ecocashbotcore] - Initializing Spring DispatcherServlet 'dispatcherServlet' 
.20:57:28.079 INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet' 
.20:57:28.079 INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 0 ms 
.20:57:28.304 INFO  o.s.s.l.SpringSecurityLdapTemplate - Ignoring PartialResultException 
.20:57:28.919 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow transaction request {
  "responseId": "5a239ec4-3f5b-4350-a917-d5f8c9fa6551-b4cb2fcf",
  "queryResult": {
    "queryText": "Reset my pin",
    "parameters": {
      "any": [
        "Reset my pin"
      ]
    },
    "allRequiredParamsPresent": true,
    "outputContexts": [
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/ticket",
        "lifespanCount": 48,
        "parameters": {
          "id": 41.0,
          "msisdn": "",
          "question": 0.0,
          "any": [
            "Reset my pin"
          ],
          "any.original": [
            "Reset my pin"
          ]
        }
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/awaiting_answers",
        "lifespanCount": 0,
        "parameters": {
          "any": [
            "Reset my pin"
          ],
          "any.original": [
            "Reset my pin"
          ]
        }
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/__system_counters__",
        "lifespanCount": 0,
        "parameters": {
          "no-input": 0.0,
          "no-match": 0.0,
          "any": [
            "Reset my pin"
          ],
          "any.original": [
            "Reset my pin"
          ]
        }
      }
    ],
    "intent": {
      "name": "projects/the-attendant-hgawnh/agent/intents/e3b607ca-bdcf-480e-9a59-ceb3098f0c67",
      "displayName": "usecase.pinreset.security.questions.first.answer"
    },
    "intentDetectionConfidence": 1.0,
    "languageCode": "en",
    "sentimentAnalysisResult": {
      "queryTextSentiment": {
        "score": -0.4,
        "magnitude": 0.4
      }
    }
  },
  "originalDetectIntentRequest": {
    "payload": {
      "SmsStatus": "received",
      "NumMedia": "0",
      "WaId": "263783324671",
      "NumSegments": "1",
      "To": "whatsapp:+14155238886",
      "From": "whatsapp:+263783324671",
      "AccountSid": "ACeb9bc0506560f0c01a5358d1f3a45dec",
      "MessageSid": "SM5edb3bd37966521ac441fec18a9ec108",
      "ProfileName": "justicemacheyo",
      "SmsMessageSid": "SM5edb3bd37966521ac441fec18a9ec108",
      "SmsSid": "SM5edb3bd37966521ac441fec18a9ec108",
      "Body": "Reset my pin",
      "ApiVersion": "2010-04-01"
    }
  },
  "session": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671"
}
 
.20:57:28.944 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow intent: usecase.pinreset.security.questions.first.answer 
.20:57:29.736 ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [/ecocashbotcore] threw exception [Request processing failed; nested exception is java.lang.ArrayIndexOutOfBoundsException: 1] with root cause 
java.lang.ArrayIndexOutOfBoundsException: 1
	at zw.co.cassavasmartech.ecocashchatbotcore.dialogflow.DialogFlowServiceImpl.pinresetUsecaseSecurityQuestionsFirstAnswerHandler(DialogFlowServiceImpl.java:993)
	at zw.co.cassavasmartech.ecocashchatbotcore.dialogflow.DialogFlowServiceImpl.processWebhookCall(DialogFlowServiceImpl.java:72)
	at zw.co.cassavasmartech.ecocashchatbotcore.controller.DialogFlowController.inbound(DialogFlowController.java:23)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1064)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:228)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at zw.co.cassavasmartech.ecocashchatbotcore.security.CustomFilter.doFilter(CustomFilter.java:15)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1723)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
.20:57:44.269 INFO  o.s.s.l.SpringSecurityLdapTemplate - Ignoring PartialResultException 
.20:57:44.426 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow transaction request {
  "responseId": "5558382e-f870-4dd6-889a-d62988b49a83-b4cb2fcf",
  "queryResult": {
    "queryText": "Reset my pin",
    "parameters": {},
    "allRequiredParamsPresent": true,
    "outputContexts": [
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/awaiting_pinreset_enrollment_confirmation",
        "lifespanCount": 1
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/ticket",
        "lifespanCount": 47,
        "parameters": {
          "id": 41.0,
          "msisdn": "",
          "question": 0.0,
          "any": [
            "Reset my pin"
          ],
          "any.original": [
            "Reset my pin"
          ]
        }
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/__system_counters__",
        "lifespanCount": 0,
        "parameters": {
          "no-input": 0.0,
          "no-match": 0.0
        }
      }
    ],
    "intent": {
      "name": "projects/the-attendant-hgawnh/agent/intents/cbd27331-6c49-4632-8f75-a3398cb8b7d2",
      "displayName": "usecase.pinreset"
    },
    "intentDetectionConfidence": 0.8193823,
    "languageCode": "en",
    "sentimentAnalysisResult": {
      "queryTextSentiment": {
        "score": -0.4,
        "magnitude": 0.4
      }
    }
  },
  "originalDetectIntentRequest": {
    "payload": {
      "WaId": "263783324671",
      "NumSegments": "1",
      "MessageSid": "SMecb51092f8129166512e12fdbff5ea69",
      "ApiVersion": "2010-04-01",
      "SmsStatus": "received",
      "ProfileName": "justicemacheyo",
      "NumMedia": "0",
      "Body": "Reset my pin",
      "AccountSid": "ACeb9bc0506560f0c01a5358d1f3a45dec",
      "SmsMessageSid": "SMecb51092f8129166512e12fdbff5ea69",
      "From": "whatsapp:+263783324671",
      "To": "whatsapp:+14155238886",
      "SmsSid": "SMecb51092f8129166512e12fdbff5ea69"
    }
  },
  "session": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671"
}
 
.20:57:44.436 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow intent: usecase.pinreset 
.20:57:44.722 INFO  z.c.c.e.d.DialogFlowServiceImpl - Sending response to dialogFlow: {
  "fulfillmentText": "Great!! I can see you are enrolled on our self service platformðŸ˜ƒmay I go on to ask your security questions to verify your identity?",
  "source": "ecocashchatbotcore",
  "outputContexts": [
    {
      "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/ticket",
      "lifespanCount": 50,
      "parameters": {
        "id": 42,
        "question": 0
      }
    }
  ]
}
 
.20:57:50.091 INFO  o.s.s.l.SpringSecurityLdapTemplate - Ignoring PartialResultException 
.20:57:50.263 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow transaction request {
  "responseId": "5374c85a-07f0-45a7-9301-39cab2c8322a-b4cb2fcf",
  "queryResult": {
    "queryText": "Yes",
    "parameters": {},
    "allRequiredParamsPresent": true,
    "outputContexts": [
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/awaiting_answers",
        "lifespanCount": 1
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/ticket",
        "lifespanCount": 49,
        "parameters": {
          "id": 42.0,
          "msisdn": "",
          "question": 0.0,
          "any": [
            "Reset my pin"
          ],
          "any.original": [
            "Reset my pin"
          ]
        }
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/awaiting_pinreset_enrollment_confirmation",
        "lifespanCount": 0
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/__system_counters__",
        "lifespanCount": 0,
        "parameters": {
          "no-input": 0.0,
          "no-match": 0.0
        }
      }
    ],
    "intent": {
      "name": "projects/the-attendant-hgawnh/agent/intents/799768aa-ff3f-4b08-9975-b5a572df8b66",
      "displayName": "usecase.pinreset.security.questions.affirmative"
    },
    "intentDetectionConfidence": 1.0,
    "languageCode": "en",
    "sentimentAnalysisResult": {
      "queryTextSentiment": {
        "score": 0.5,
        "magnitude": 0.5
      }
    }
  },
  "originalDetectIntentRequest": {
    "payload": {
      "NumSegments": "1",
      "SmsStatus": "received",
      "MessageSid": "SM221b2de10be4cdd9f4b2c99dd468c5c5",
      "ProfileName": "justicemacheyo",
      "To": "whatsapp:+14155238886",
      "Body": "Yes",
      "From": "whatsapp:+263783324671",
      "WaId": "263783324671",
      "ApiVersion": "2010-04-01",
      "NumMedia": "0",
      "SmsMessageSid": "SM221b2de10be4cdd9f4b2c99dd468c5c5",
      "AccountSid": "ACeb9bc0506560f0c01a5358d1f3a45dec",
      "SmsSid": "SM221b2de10be4cdd9f4b2c99dd468c5c5"
    }
  },
  "session": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671"
}
 
.20:57:50.271 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow intent: usecase.pinreset.security.questions.affirmative 
.20:57:50.377 ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [/ecocashbotcore] threw exception [Request processing failed; nested exception is java.lang.NumberFormatException: For input string: "0.0"] with root cause 
java.lang.NumberFormatException: For input string: "0.0"
	at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
	at java.lang.Integer.parseInt(Integer.java:580)
	at java.lang.Integer.parseInt(Integer.java:615)
	at zw.co.cassavasmartech.ecocashchatbotcore.dialogflow.DialogFlowServiceImpl.pinresetUsecaseSecurityQuestionsAffirmativeHandler(DialogFlowServiceImpl.java:1027)
	at zw.co.cassavasmartech.ecocashchatbotcore.dialogflow.DialogFlowServiceImpl.processWebhookCall(DialogFlowServiceImpl.java:70)
	at zw.co.cassavasmartech.ecocashchatbotcore.controller.DialogFlowController.inbound(DialogFlowController.java:23)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1064)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:228)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at zw.co.cassavasmartech.ecocashchatbotcore.security.CustomFilter.doFilter(CustomFilter.java:15)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1723)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
.21:00:15.119 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default' 
.21:00:15.121 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated... 
.21:00:15.133 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed. 
.21:00:21.463 INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 6.2.0.Final 
.21:00:21.547 INFO  z.c.c.e.EcocashChatbotCoreApplication - Starting EcocashChatbotCoreApplication using Java 1.8.0_271 on LAPTOP-1JQH6S1S with PID 21884 (C:\Users\Kudzai Macheyo\IdeaProjects\ecocash-chatbot-core\target\classes started by Kudzai Macheyo in C:\Users\Kudzai Macheyo\IdeaProjects\ecocash-chatbot-core) 
.21:00:21.547 INFO  z.c.c.e.EcocashChatbotCoreApplication - The following profiles are active: dev 
.21:00:23.078 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode! 
.21:00:23.078 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFERRED mode. 
.21:00:23.780 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 659 ms. Found 8 JPA repository interfaces. 
.21:00:24.405 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@3104351d' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying) 
.21:00:24.412 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying) 
.21:00:24.881 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http) 
.21:00:24.889 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"] 
.21:00:24.890 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat] 
.21:00:24.890 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.50] 
.21:00:24.982 INFO  o.a.c.c.C.[.[.[/ecocashbotcore] - Initializing Spring embedded WebApplicationContext 
.21:00:24.982 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3069 ms 
.21:00:25.771 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default] 
.21:00:26.039 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.32.Final 
.21:00:26.048 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning 
.21:00:26.193 INFO  o.s.s.l.DefaultSpringSecurityContextSource -  URL 'ldap://192.168.101.47:389', root DN is '' 
.21:00:26.193 INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final} 
.21:00:26.316 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting... 
.21:00:26.891 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed. 
.21:00:27.082 INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.MySQL55Dialect 
.21:00:27.434 INFO  o.h.e.b.internal.EnversServiceImpl - Envers integration enabled? : true 
.21:00:29.536 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure Ant [pattern='/dialogflow/**'] with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@750f64fe, org.springframework.security.web.context.SecurityContextPersistenceFilter@36ef1d65, org.springframework.security.web.header.HeaderWriterFilter@70029d2d, org.springframework.security.web.authentication.logout.LogoutFilter@134f8ef6, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@6f347d7, zw.co.cassavasmartech.ecocashchatbotcore.security.CustomFilter@996a546, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5f366587, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@71179b6f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4fc165f6, org.springframework.security.web.session.SessionManagementFilter@2a2dc0a, org.springframework.security.web.access.ExceptionTranslationFilter@1e3ff233, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@c1050f2] 
.21:00:29.555 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4c302f38, org.springframework.security.web.context.SecurityContextPersistenceFilter@604d23fa, org.springframework.security.web.header.HeaderWriterFilter@834e986, org.springframework.security.web.authentication.logout.LogoutFilter@2785db06, zw.co.cassavasmartech.ecocashchatbotcore.security.JWTFilter@75aea2ba, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1cc8416a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@331ff3ac, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2a47597, org.springframework.security.web.session.SessionManagementFilter@6cae2e4d, org.springframework.security.web.access.ExceptionTranslationFilter@7741771e, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@d13baac] 
.21:00:31.040 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"] 
.21:00:31.134 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path '/ecocashbotcore' 
.21:00:31.141 INFO  o.s.d.r.c.DeferredRepositoryInitializationListener - Triggering deferred initialization of Spring Data repositoriesâ€¦ 
.21:00:32.793 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform] 
.21:00:32.816 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default' 
.21:00:34.432 INFO  o.s.d.r.c.DeferredRepositoryInitializationListener - Spring Data repositories initialized! 
.21:00:34.466 INFO  z.c.c.e.EcocashChatbotCoreApplication - Started EcocashChatbotCoreApplication in 13.476 seconds (JVM running for 13.959) 
.21:00:47.006 INFO  o.a.c.c.C.[.[.[/ecocashbotcore] - Initializing Spring DispatcherServlet 'dispatcherServlet' 
.21:00:47.006 INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet' 
.21:00:47.007 INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms 
.21:00:47.213 INFO  o.s.s.l.SpringSecurityLdapTemplate - Ignoring PartialResultException 
.21:00:47.457 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow transaction request {
  "responseId": "0f867b92-6960-4e80-ba96-7db1ab59e2a6-b4cb2fcf",
  "queryResult": {
    "queryText": "Reset my pin",
    "parameters": {
      "any": [
        "Reset my pin"
      ]
    },
    "allRequiredParamsPresent": true,
    "outputContexts": [
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/ticket",
        "lifespanCount": 48,
        "parameters": {
          "id": 42.0,
          "msisdn": "",
          "question": 0.0,
          "any": [
            "Reset my pin"
          ],
          "any.original": [
            "Reset my pin"
          ]
        }
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/awaiting_answers",
        "lifespanCount": 0,
        "parameters": {
          "any": [
            "Reset my pin"
          ],
          "any.original": [
            "Reset my pin"
          ]
        }
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/__system_counters__",
        "lifespanCount": 0,
        "parameters": {
          "no-input": 0.0,
          "no-match": 0.0,
          "any": [
            "Reset my pin"
          ],
          "any.original": [
            "Reset my pin"
          ]
        }
      }
    ],
    "intent": {
      "name": "projects/the-attendant-hgawnh/agent/intents/e3b607ca-bdcf-480e-9a59-ceb3098f0c67",
      "displayName": "usecase.pinreset.security.questions.first.answer"
    },
    "intentDetectionConfidence": 1.0,
    "languageCode": "en",
    "sentimentAnalysisResult": {
      "queryTextSentiment": {
        "score": -0.4,
        "magnitude": 0.4
      }
    }
  },
  "originalDetectIntentRequest": {
    "payload": {
      "WaId": "263783324671",
      "SmsSid": "SM0ab6437453b0421a5023785825aa3cf9",
      "SmsStatus": "received",
      "ApiVersion": "2010-04-01",
      "To": "whatsapp:+14155238886",
      "From": "whatsapp:+263783324671",
      "AccountSid": "ACeb9bc0506560f0c01a5358d1f3a45dec",
      "NumSegments": "1",
      "MessageSid": "SM0ab6437453b0421a5023785825aa3cf9",
      "Body": "Reset my pin",
      "SmsMessageSid": "SM0ab6437453b0421a5023785825aa3cf9",
      "NumMedia": "0",
      "ProfileName": "justicemacheyo"
    }
  },
  "session": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671"
}
 
.21:00:47.465 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow intent: usecase.pinreset.security.questions.first.answer 
.21:00:47.683 ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [/ecocashbotcore] threw exception [Request processing failed; nested exception is java.lang.ArrayIndexOutOfBoundsException: 1] with root cause 
java.lang.ArrayIndexOutOfBoundsException: 1
	at zw.co.cassavasmartech.ecocashchatbotcore.dialogflow.DialogFlowServiceImpl.pinresetUsecaseSecurityQuestionsFirstAnswerHandler(DialogFlowServiceImpl.java:993)
	at zw.co.cassavasmartech.ecocashchatbotcore.dialogflow.DialogFlowServiceImpl.processWebhookCall(DialogFlowServiceImpl.java:72)
	at zw.co.cassavasmartech.ecocashchatbotcore.controller.DialogFlowController.inbound(DialogFlowController.java:23)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1064)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:228)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at zw.co.cassavasmartech.ecocashchatbotcore.security.CustomFilter.doFilter(CustomFilter.java:15)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1723)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
.21:01:02.949 INFO  o.s.s.l.SpringSecurityLdapTemplate - Ignoring PartialResultException 
.21:01:03.132 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow transaction request {
  "responseId": "7345569d-cf75-4e84-a0d4-37b0d2dd0fc8-b4cb2fcf",
  "queryResult": {
    "queryText": "Reset my pin",
    "parameters": {},
    "allRequiredParamsPresent": true,
    "outputContexts": [
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/awaiting_pinreset_enrollment_confirmation",
        "lifespanCount": 1
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/ticket",
        "lifespanCount": 47,
        "parameters": {
          "id": 42.0,
          "msisdn": "",
          "question": 0.0,
          "any": [
            "Reset my pin"
          ],
          "any.original": [
            "Reset my pin"
          ]
        }
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/__system_counters__",
        "lifespanCount": 0,
        "parameters": {
          "no-input": 0.0,
          "no-match": 0.0
        }
      }
    ],
    "intent": {
      "name": "projects/the-attendant-hgawnh/agent/intents/cbd27331-6c49-4632-8f75-a3398cb8b7d2",
      "displayName": "usecase.pinreset"
    },
    "intentDetectionConfidence": 0.8193823,
    "languageCode": "en",
    "sentimentAnalysisResult": {
      "queryTextSentiment": {
        "score": -0.4,
        "magnitude": 0.4
      }
    }
  },
  "originalDetectIntentRequest": {
    "payload": {
      "Body": "Reset my pin",
      "From": "whatsapp:+263783324671",
      "MessageSid": "SM94896fac13d7fb77407ee483df8f1cfc",
      "ProfileName": "justicemacheyo",
      "NumSegments": "1",
      "NumMedia": "0",
      "To": "whatsapp:+14155238886",
      "ApiVersion": "2010-04-01",
      "SmsMessageSid": "SM94896fac13d7fb77407ee483df8f1cfc",
      "SmsSid": "SM94896fac13d7fb77407ee483df8f1cfc",
      "SmsStatus": "received",
      "AccountSid": "ACeb9bc0506560f0c01a5358d1f3a45dec",
      "WaId": "263783324671"
    }
  },
  "session": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671"
}
 
.21:01:03.141 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow intent: usecase.pinreset 
.21:01:03.522 INFO  z.c.c.e.d.DialogFlowServiceImpl - Sending response to dialogFlow: {
  "fulfillmentText": "Great!! I can see you are enrolled on our self service platformðŸ˜ƒmay I go on to ask your security questions to verify your identity?",
  "source": "ecocashchatbotcore",
  "outputContexts": [
    {
      "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/ticket",
      "lifespanCount": 50,
      "parameters": {
        "id": 43,
        "question": 0
      }
    }
  ]
}
 
.21:01:12.894 INFO  o.s.s.l.SpringSecurityLdapTemplate - Ignoring PartialResultException 
.21:01:13.059 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow transaction request {
  "responseId": "5aeef038-d372-4805-a550-c03190f615c9-b4cb2fcf",
  "queryResult": {
    "queryText": "Yes",
    "parameters": {},
    "allRequiredParamsPresent": true,
    "outputContexts": [
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/awaiting_answers",
        "lifespanCount": 1
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/ticket",
        "lifespanCount": 49,
        "parameters": {
          "id": 43.0,
          "msisdn": "",
          "question": 0.0,
          "any": [
            "Reset my pin"
          ],
          "any.original": [
            "Reset my pin"
          ]
        }
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/awaiting_pinreset_enrollment_confirmation",
        "lifespanCount": 0
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/__system_counters__",
        "lifespanCount": 0,
        "parameters": {
          "no-input": 0.0,
          "no-match": 0.0
        }
      }
    ],
    "intent": {
      "name": "projects/the-attendant-hgawnh/agent/intents/799768aa-ff3f-4b08-9975-b5a572df8b66",
      "displayName": "usecase.pinreset.security.questions.affirmative"
    },
    "intentDetectionConfidence": 1.0,
    "languageCode": "en",
    "sentimentAnalysisResult": {
      "queryTextSentiment": {
        "score": 0.5,
        "magnitude": 0.5
      }
    }
  },
  "originalDetectIntentRequest": {
    "payload": {
      "SmsSid": "SM5d9e76e9c5b45c912669dd278656a09e",
      "SmsMessageSid": "SM5d9e76e9c5b45c912669dd278656a09e",
      "MessageSid": "SM5d9e76e9c5b45c912669dd278656a09e",
      "WaId": "263783324671",
      "ProfileName": "justicemacheyo",
      "AccountSid": "ACeb9bc0506560f0c01a5358d1f3a45dec",
      "Body": "Yes",
      "ApiVersion": "2010-04-01",
      "NumSegments": "1",
      "From": "whatsapp:+263783324671",
      "To": "whatsapp:+14155238886",
      "SmsStatus": "received",
      "NumMedia": "0"
    }
  },
  "session": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671"
}
 
.21:01:13.067 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow intent: usecase.pinreset.security.questions.affirmative 
.21:01:13.154 ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [/ecocashbotcore] threw exception [Request processing failed; nested exception is java.lang.NumberFormatException: For input string: "0.01"] with root cause 
java.lang.NumberFormatException: For input string: "0.01"
	at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
	at java.lang.Integer.parseInt(Integer.java:580)
	at java.lang.Integer.parseInt(Integer.java:615)
	at zw.co.cassavasmartech.ecocashchatbotcore.dialogflow.DialogFlowServiceImpl.pinresetUsecaseSecurityQuestionsAffirmativeHandler(DialogFlowServiceImpl.java:1031)
	at zw.co.cassavasmartech.ecocashchatbotcore.dialogflow.DialogFlowServiceImpl.processWebhookCall(DialogFlowServiceImpl.java:70)
	at zw.co.cassavasmartech.ecocashchatbotcore.controller.DialogFlowController.inbound(DialogFlowController.java:23)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1064)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:228)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at zw.co.cassavasmartech.ecocashchatbotcore.security.CustomFilter.doFilter(CustomFilter.java:15)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1723)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
.21:01:57.431 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default' 
.21:01:57.432 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated... 
.21:01:57.443 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed. 
.21:02:05.030 INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 6.2.0.Final 
.21:02:05.059 INFO  z.c.c.e.EcocashChatbotCoreApplication - Starting EcocashChatbotCoreApplication using Java 1.8.0_271 on LAPTOP-1JQH6S1S with PID 20980 (C:\Users\Kudzai Macheyo\IdeaProjects\ecocash-chatbot-core\target\classes started by Kudzai Macheyo in C:\Users\Kudzai Macheyo\IdeaProjects\ecocash-chatbot-core) 
.21:02:05.063 INFO  z.c.c.e.EcocashChatbotCoreApplication - The following profiles are active: dev 
.21:02:06.832 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode! 
.21:02:06.840 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFERRED mode. 
.21:02:07.545 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 671 ms. Found 8 JPA repository interfaces. 
.21:02:07.947 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@3b08f438' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying) 
.21:02:07.953 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying) 
.21:02:08.401 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http) 
.21:02:08.409 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"] 
.21:02:08.410 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat] 
.21:02:08.410 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.50] 
.21:02:08.508 INFO  o.a.c.c.C.[.[.[/ecocashbotcore] - Initializing Spring embedded WebApplicationContext 
.21:02:08.508 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3027 ms 
.21:02:08.671 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default] 
.21:02:08.941 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.4.32.Final 
.21:02:09.022 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning 
.21:02:09.666 INFO  o.s.s.l.DefaultSpringSecurityContextSource -  URL 'ldap://192.168.101.47:389', root DN is '' 
.21:02:09.678 INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final} 
.21:02:09.804 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting... 
.21:02:10.002 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed. 
.21:02:10.033 INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.MySQL55Dialect 
.21:02:10.118 INFO  o.h.e.b.internal.EnversServiceImpl - Envers integration enabled? : true 
.21:02:12.680 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure Ant [pattern='/dialogflow/**'] with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5c134052, org.springframework.security.web.context.SecurityContextPersistenceFilter@2a2dc0a, org.springframework.security.web.header.HeaderWriterFilter@1e3ff233, org.springframework.security.web.authentication.logout.LogoutFilter@29a33620, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@603cabc4, zw.co.cassavasmartech.ecocashchatbotcore.security.CustomFilter@69de5bed, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@36ef1d65, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@60743cdb, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@750f64fe, org.springframework.security.web.session.SessionManagementFilter@1e225820, org.springframework.security.web.access.ExceptionTranslationFilter@6ac4c3f7, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@26865482] 
.21:02:12.683 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@11dcd42c, org.springframework.security.web.context.SecurityContextPersistenceFilter@834e986, org.springframework.security.web.header.HeaderWriterFilter@45117dd, org.springframework.security.web.authentication.logout.LogoutFilter@331ff3ac, zw.co.cassavasmartech.ecocashchatbotcore.security.JWTFilter@d13baac, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6cae2e4d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@604d23fa, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4c302f38, org.springframework.security.web.session.SessionManagementFilter@7741771e, org.springframework.security.web.access.ExceptionTranslationFilter@cfd1075, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@4dfe8b37] 
.21:02:13.149 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"] 
.21:02:13.227 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path '/ecocashbotcore' 
.21:02:13.233 INFO  o.s.d.r.c.DeferredRepositoryInitializationListener - Triggering deferred initialization of Spring Data repositoriesâ€¦ 
.21:02:14.440 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform] 
.21:02:14.447 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default' 
.21:02:15.847 INFO  o.s.d.r.c.DeferredRepositoryInitializationListener - Spring Data repositories initialized! 
.21:02:15.853 INFO  z.c.c.e.EcocashChatbotCoreApplication - Started EcocashChatbotCoreApplication in 11.276 seconds (JVM running for 11.814) 
.21:02:27.720 INFO  o.a.c.c.C.[.[.[/ecocashbotcore] - Initializing Spring DispatcherServlet 'dispatcherServlet' 
.21:02:27.720 INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet' 
.21:02:27.720 INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 0 ms 
.21:02:27.946 INFO  o.s.s.l.SpringSecurityLdapTemplate - Ignoring PartialResultException 
.21:02:28.472 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow transaction request {
  "responseId": "26f05b20-6b30-4a3f-bf12-1fdc4aba954b-b4cb2fcf",
  "queryResult": {
    "queryText": "Reset my pin",
    "parameters": {
      "any": [
        "Reset my pin"
      ]
    },
    "allRequiredParamsPresent": true,
    "outputContexts": [
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/ticket",
        "lifespanCount": 48,
        "parameters": {
          "id": 43.0,
          "msisdn": "",
          "question": 0.0,
          "any": [
            "Reset my pin"
          ],
          "any.original": [
            "Reset my pin"
          ]
        }
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/awaiting_answers",
        "lifespanCount": 0,
        "parameters": {
          "any": [
            "Reset my pin"
          ],
          "any.original": [
            "Reset my pin"
          ]
        }
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/__system_counters__",
        "lifespanCount": 0,
        "parameters": {
          "no-input": 0.0,
          "no-match": 0.0,
          "any": [
            "Reset my pin"
          ],
          "any.original": [
            "Reset my pin"
          ]
        }
      }
    ],
    "intent": {
      "name": "projects/the-attendant-hgawnh/agent/intents/e3b607ca-bdcf-480e-9a59-ceb3098f0c67",
      "displayName": "usecase.pinreset.security.questions.first.answer"
    },
    "intentDetectionConfidence": 1.0,
    "languageCode": "en",
    "sentimentAnalysisResult": {
      "queryTextSentiment": {
        "score": -0.4,
        "magnitude": 0.4
      }
    }
  },
  "originalDetectIntentRequest": {
    "payload": {
      "To": "whatsapp:+14155238886",
      "ApiVersion": "2010-04-01",
      "SmsStatus": "received",
      "ProfileName": "justicemacheyo",
      "SmsMessageSid": "SM20bbb3a662f0eb7aa38a5848402ce5b0",
      "SmsSid": "SM20bbb3a662f0eb7aa38a5848402ce5b0",
      "MessageSid": "SM20bbb3a662f0eb7aa38a5848402ce5b0",
      "Body": "Reset my pin",
      "AccountSid": "ACeb9bc0506560f0c01a5358d1f3a45dec",
      "NumSegments": "1",
      "From": "whatsapp:+263783324671",
      "NumMedia": "0",
      "WaId": "263783324671"
    }
  },
  "session": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671"
}
 
.21:02:28.491 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow intent: usecase.pinreset.security.questions.first.answer 
.21:02:28.919 ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [/ecocashbotcore] threw exception [Request processing failed; nested exception is java.lang.ArrayIndexOutOfBoundsException: 1] with root cause 
java.lang.ArrayIndexOutOfBoundsException: 1
	at zw.co.cassavasmartech.ecocashchatbotcore.dialogflow.DialogFlowServiceImpl.pinresetUsecaseSecurityQuestionsFirstAnswerHandler(DialogFlowServiceImpl.java:993)
	at zw.co.cassavasmartech.ecocashchatbotcore.dialogflow.DialogFlowServiceImpl.processWebhookCall(DialogFlowServiceImpl.java:72)
	at zw.co.cassavasmartech.ecocashchatbotcore.controller.DialogFlowController.inbound(DialogFlowController.java:23)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1064)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:228)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at zw.co.cassavasmartech.ecocashchatbotcore.security.CustomFilter.doFilter(CustomFilter.java:15)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:190)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:163)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1723)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
.21:02:37.596 INFO  o.s.s.l.SpringSecurityLdapTemplate - Ignoring PartialResultException 
.21:02:37.770 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow transaction request {
  "responseId": "7ffdd437-e137-407c-a071-102397533620-b4cb2fcf",
  "queryResult": {
    "queryText": "Reset my pin",
    "parameters": {},
    "allRequiredParamsPresent": true,
    "outputContexts": [
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/awaiting_pinreset_enrollment_confirmation",
        "lifespanCount": 1
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/ticket",
        "lifespanCount": 47,
        "parameters": {
          "id": 43.0,
          "msisdn": "",
          "question": 0.0,
          "any": [
            "Reset my pin"
          ],
          "any.original": [
            "Reset my pin"
          ]
        }
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/__system_counters__",
        "lifespanCount": 0,
        "parameters": {
          "no-input": 0.0,
          "no-match": 0.0
        }
      }
    ],
    "intent": {
      "name": "projects/the-attendant-hgawnh/agent/intents/cbd27331-6c49-4632-8f75-a3398cb8b7d2",
      "displayName": "usecase.pinreset"
    },
    "intentDetectionConfidence": 0.8193823,
    "languageCode": "en",
    "sentimentAnalysisResult": {
      "queryTextSentiment": {
        "score": -0.4,
        "magnitude": 0.4
      }
    }
  },
  "originalDetectIntentRequest": {
    "payload": {
      "SmsMessageSid": "SM6c7d2fc128b1d894f3221ff7559385f5",
      "To": "whatsapp:+14155238886",
      "MessageSid": "SM6c7d2fc128b1d894f3221ff7559385f5",
      "SmsSid": "SM6c7d2fc128b1d894f3221ff7559385f5",
      "From": "whatsapp:+263783324671",
      "WaId": "263783324671",
      "AccountSid": "ACeb9bc0506560f0c01a5358d1f3a45dec",
      "Body": "Reset my pin",
      "NumMedia": "0",
      "ProfileName": "justicemacheyo",
      "SmsStatus": "received",
      "NumSegments": "1",
      "ApiVersion": "2010-04-01"
    }
  },
  "session": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671"
}
 
.21:02:37.778 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow intent: usecase.pinreset 
.21:02:38.158 INFO  z.c.c.e.d.DialogFlowServiceImpl - Sending response to dialogFlow: {
  "fulfillmentText": "Great!! I can see you are enrolled on our self service platformðŸ˜ƒmay I go on to ask your security questions to verify your identity?",
  "source": "ecocashchatbotcore",
  "outputContexts": [
    {
      "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/ticket",
      "lifespanCount": 50,
      "parameters": {
        "id": 44,
        "question": 0
      }
    }
  ]
}
 
.21:02:43.234 INFO  o.s.s.l.SpringSecurityLdapTemplate - Ignoring PartialResultException 
.21:02:43.416 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow transaction request {
  "responseId": "b940b40b-2262-4c24-9142-f2da3594b5bf-b4cb2fcf",
  "queryResult": {
    "queryText": "Yes",
    "parameters": {},
    "allRequiredParamsPresent": true,
    "outputContexts": [
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/awaiting_answers",
        "lifespanCount": 1
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/ticket",
        "lifespanCount": 49,
        "parameters": {
          "id": 44.0,
          "msisdn": "",
          "question": 0.0,
          "any": [
            "Reset my pin"
          ],
          "any.original": [
            "Reset my pin"
          ]
        }
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/awaiting_pinreset_enrollment_confirmation",
        "lifespanCount": 0
      },
      {
        "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/__system_counters__",
        "lifespanCount": 0,
        "parameters": {
          "no-input": 0.0,
          "no-match": 0.0
        }
      }
    ],
    "intent": {
      "name": "projects/the-attendant-hgawnh/agent/intents/799768aa-ff3f-4b08-9975-b5a572df8b66",
      "displayName": "usecase.pinreset.security.questions.affirmative"
    },
    "intentDetectionConfidence": 1.0,
    "languageCode": "en",
    "sentimentAnalysisResult": {
      "queryTextSentiment": {
        "score": 0.5,
        "magnitude": 0.5
      }
    }
  },
  "originalDetectIntentRequest": {
    "payload": {
      "ProfileName": "justicemacheyo",
      "WaId": "263783324671",
      "To": "whatsapp:+14155238886",
      "NumMedia": "0",
      "Body": "Yes",
      "SmsMessageSid": "SM961aa0d791f8884fac83e575cfc76a3c",
      "SmsStatus": "received",
      "SmsSid": "SM961aa0d791f8884fac83e575cfc76a3c",
      "From": "whatsapp:+263783324671",
      "ApiVersion": "2010-04-01",
      "NumSegments": "1",
      "MessageSid": "SM961aa0d791f8884fac83e575cfc76a3c",
      "AccountSid": "ACeb9bc0506560f0c01a5358d1f3a45dec"
    }
  },
  "session": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671"
}
 
.21:02:43.416 INFO  z.c.c.e.d.DialogFlowServiceImpl - Processing dialogflow intent: usecase.pinreset.security.questions.affirmative 
.21:02:43.502 INFO  z.c.c.e.d.DialogFlowServiceImpl - Sending response to dialogFlow: {
  "fulfillmentText": "What is your favourite sport?",
  "source": "ecocashchatbotcore",
  "outputContexts": [
    {
      "name": "projects/the-attendant-hgawnh/agent/sessions/whatsapp:+263783324671/contexts/ticket",
      "lifespanCount": 50,
      "parameters": {
        "id": 44,
        "question": 1
      }
    }
  ]
}
 
.23:57:01.270 WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=2h45m51s72ms41Âµs400ns). 
